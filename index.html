<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Hot Finder v2.5</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f5f5f5;
            color: #333;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 30px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .top-panel {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        .search-section {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        .control-section {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        .main-content {
            display: flex;
            gap: 20px;
        }
        
        .center-panel {
            flex: 3;
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .right-panel {
            flex: 1;
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            height: fit-content;
        }
        
        .search-buttons {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            justify-content: center;
        }
        
        .search-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 5px;
            background: #4CAF50;
            color: white;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.3s;
        }
        
        .search-btn:hover {
            background: #45a049;
        }
        
        .search-btn.active {
            background: #2196F3;
        }
        
        .search-input-container {
            display: flex;
            gap: 10px;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .search-input {
            flex: 1;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }
        
        .execute-btn {
            padding: 12px 20px;
            background: #FF5722;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            white-space: nowrap;
        }
        
        .execute-btn:hover {
            background: #e64a19;
        }
        
        .control-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }
        
        .control-btn {
            padding: 8px 12px;
            border: none;
            border-radius: 4px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .control-btn.start { background: #4CAF50; color: white; }
        .control-btn.stop { background: #f44336; color: white; }
        .control-btn.clear { background: #ff9800; color: white; }
        .control-btn.excel { background: #2196F3; color: white; }
        .control-btn.save { background: #9c27b0; color: white; }
        .control-btn.load { background: #607d8b; color: white; }
        .control-btn.license { background: #795548; color: white; }
        .control-btn.exit { background: #424242; color: white; }
        
        .control-btn:hover {
            opacity: 0.8;
            transform: translateY(-1px);
        }
        
        .api-section {
            display: flex;
            gap: 15px;
            align-items: flex-start;
        }
        
        .api-input {
            flex: 2;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 3px;
            font-size: 12px;
            height: 80px;
            resize: vertical;
        }
        
        .stats-section {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .results-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            font-size: 12px;
        }
        
        .results-table th,
        .results-table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        
        .results-table th {
            background: #f2f2f2;
            font-weight: bold;
            position: sticky;
            top: 0;
        }
        
        .results-table tr:hover {
            background: #f5f5f5;
            cursor: pointer;
        }
        
        .results-table tr.selected {
            background: #e3f2fd;
        }
        
        .preview-area {
            text-align: center;
        }
        
        .preview-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
        }
        
        .preview-thumbnail {
            width: 100%;
            max-width: 300px;
            border-radius: 5px;
            margin-bottom: 10px;
        }
        
        .preview-info {
            font-size: 12px;
            color: #666;
            line-height: 1.4;
        }
        
        .stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            font-size: 14px;
            color: #666;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }
        
        .channel-link {
            color: #2196F3;
            text-decoration: none;
        }
        
        .channel-link:hover {
            text-decoration: underline;
        }
        
        .video-link {
            color: #FF5722;
            text-decoration: none;
        }
        
        .video-link:hover {
            text-decoration: underline;
        }
        
        .command-log {
            background: #2d2d2d;
            color: #00ff00;
            padding: 15px;
            border-radius: 5px;
            height: 200px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            line-height: 1.4;
            margin-top: 20px;
        }
        
        .log-input {
            width: 100%;
            background: #1e1e1e;
            color: #00ff00;
            border: 1px solid #555;
            padding: 8px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            margin-top: 10px;
        }
        
        .bottom-panel {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-top: 20px;
        }
        
        .working-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            background: #f44336;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .working-indicator.active {
            background: #4CAF50;
            animation: pulse 1s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        /* 모달들 */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }
        
        .modal-content {
            position: relative;
            background-color: white;
            margin: 5% auto;
            padding: 30px;
            border-radius: 10px;
            width: 80%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            border-bottom: 2px solid #eee;
            padding-bottom: 15px;
        }
        
        .close-btn {
            background: #f44336;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        
        .settings-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .settings-group {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 8px;
        }
        
        .settings-group h4 {
            margin-bottom: 15px;
            color: #333;
            border-bottom: 1px solid #ddd;
            padding-bottom: 8px;
        }
        
        .setting-item {
            margin-bottom: 15px;
        }
        
        .setting-item label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #555;
        }
        
        .setting-item input,
        .setting-item select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .setting-item input[type="checkbox"] {
            width: auto;
            margin-right: 8px;
        }
        
        .modal-actions {
            display: flex;
            gap: 10px;
            justify-content: center;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }
        
        .modal-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.3s;
        }
        
        .modal-btn.save {
            background: #4CAF50;
            color: white;
        }
        
        .modal-btn.reset {
            background: #ff9800;
            color: white;
        }
        
        .modal-btn.cancel {
            background: #9e9e9e;
            color: white;
        }
        
        .modal-btn:hover {
            opacity: 0.8;
        }
        
        .current-settings {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>YouTube Hot Finder v2.5</h1>
        </div>
        
        <div class="top-panel">
            <h3>검색 타입 선택</h3>
            <div class="search-buttons">
                <button class="search-btn" data-type="channel">채널핸들명</button>
                <button class="search-btn" data-type="keyword">키워드입력</button>
                <button class="search-btn" data-type="settings">설정</button>
                <button class="search-btn" data-type="results">결과</button>
                <button class="search-btn" data-type="smart" style="background: #ff5722;">🔥 스마트검색</button>
            </div>
        </div>
        
        <div class="search-section">
            <h3>검색어 입력</h3>
            <div class="search-input-container">
                <input type="text" class="search-input" id="searchInput" placeholder="명령어를 입력하세요">
                <button class="execute-btn" onclick="executeSearch()">검색 실행</button>
            </div>
            <div class="stats">
                <span>검색 상태: <span id="searchStatus">대기중</span></span>
                <span>검색 유형: <span id="searchType">-</span></span>
                <span>총 결과: <span id="totalResults">0</span></span>
                <span>선택됨: <span id="selectedCount">0</span></span>
            </div>
        </div>
        
        <div class="control-section">
            <h3>작업 제어</h3>
            <div class="control-buttons">
                <button class="control-btn start" onclick="startOperation()">시작하기</button>
                <button class="control-btn stop" onclick="stopOperation()">정지하기</button>
                <button class="control-btn clear" onclick="clearResults()">결과지우기</button>
                <button class="control-btn excel" onclick="exportToExcel()">엑셀로저장</button>
                <button class="control-btn save" onclick="saveCurrentWork()">현재작업저장</button>
                <button class="control-btn load" onclick="loadWork()">작업 불러오기</button>
                <button class="control-btn license" onclick="manageLicense()">라이선스관리</button>
                <button class="control-btn exit" onclick="exitProgram()">종료</button>
                <button class="control-btn" style="background: #9c27b0;" onclick="openClassification()">🏷️ 분류관리</button>
            </div>
            
            <div class="api-section">
                <textarea class="api-input" placeholder="YouTube Data API v3 Key&#10;AIzaSyChVn1T7F0qyGR3Tk7aeHVrxB1_czmNvM&#10;&#10;여기에 API 키를 입력하세요" id="apiKey"></textarea>
                <div class="stats-section">
                    <div>
                        <span class="working-indicator" id="workingIndicator"></span>
                        작업 상태: <span id="workStatus">대기중</span>
                    </div>
                    <div>
                        처리된 항목: <span id="processedItems">0</span> / 
                        전체: <span id="totalItems">0</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="main-content">
            <div class="center-panel">
                <h3>검색 결과</h3>
                <div id="resultsContainer">
                    <div class="loading">검색 버튼을 선택하고 명령어를 입력한 후 검색 실행을 클릭하세요.</div>
                </div>
            </div>
            
            <div class="right-panel">
                <div class="preview-area">
                    <div class="preview-title">영상 미리보기</div>
                    <div id="previewContent">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE2OCIgdmlld0JveD0iMCAwIDMwMCAxNjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMTY4IiBmaWxsPSIjQ0NDQ0NDIi8+Cjx0ZXh0IHg9IjE1MCIgeT0iNzUiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZpbGw9IiM2NjY2NjYiIGZvbnQtc2l6ZT0iMTYiPu2ZlOyDgSDrjIDquLDqs6DsoLA8L3RleHQ+Cjx0ZXh0IHg9IjE1MCIgeT0iMTAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSIjNjY2NjY2IiBmb250LXNpemU9IjEyIj7shKDtg50g7ZWE7JqU7JeQ7ISc64usPC90ZXh0Pgo8L3N2Zz4K" 
                             alt="미리보기" class="preview-thumbnail" onerror="handleImageError(this)">
                        <div class="preview-info">영상을 선택하면 미리보기가 표시됩니다.</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="bottom-panel">
            <h4>명령어 / 로그 창</h4>
            <div class="command-log" id="commandLog">
[20:19:04] YouTube Hot Finder v2.5 시작됨
[20:19:04] 안전한 이미지 로딩 시스템 활성화됨
[20:19:04] 명령어 대기 중 - 검색 타입을 선택하고 명령어를 입력하세요
[20:19:05] 사용 가능한 명령어: search, keyword, smart, config, analyze, classify, help
[20:19:06] 현재 설정: 최대결과 25개, 정렬 관련도, 최소조회수 1,000
[20:19:06] 🔥 스마트 검색 기능 활성화됨
[20:19:06] 🛠️ 에러 핸들링 시스템 활성화됨
[20:19:06] 시스템 준비 완료 - 테스트용 더미 데이터 로드됨
            </div>
            <input type="text" class="log-input" placeholder="명령어를 입력하세요 (예: search @channel, keyword 트렌드, config maxResults=50)" id="commandInput" onkeypress="handleCommand(event)">
        </div>
        
        <!-- 설정 모달 -->
        <div id="settingsModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>🔧 검색 조건 설정</h2>
                    <button class="close-btn" onclick="closeSettings()">✕ 닫기</button>
                </div>
                
                <div class="current-settings">
                    <strong>현재 적용된 설정:</strong> 
                    <span id="currentSettingsDisplay">기본 설정 사용 중</span>
                </div>
                
                <div class="settings-grid">
                    <div class="settings-group">
                        <h4>📊 검색 결과 설정</h4>
                        <div class="setting-item">
                            <label>최대 검색 결과 수</label>
                            <select id="maxResults">
                                <option value="10">10개</option>
                                <option value="25" selected>25개</option>
                                <option value="50">50개</option>
                                <option value="100">100개</option>
                            </select>
                        </div>
                        <div class="setting-item">
                            <label>정렬 기준</label>
                            <select id="sortBy">
                                <option value="relevance" selected>관련도</option>
                                <option value="date">업로드일</option>
                                <option value="viewCount">조회수</option>
                                <option value="rating">평점</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="settings-group">
                        <h4>📅 시간 필터</h4>
                        <div class="setting-item">
                            <label>검색 기간</label>
                            <select id="publishedAfter">
                                <option value="">전체 기간</option>
                                <option value="1">최근 1일</option>
                                <option value="7" selected>최근 1주일</option>
                                <option value="30">최근 1개월</option>
                                <option value="365">최근 1년</option>
                            </select>
                        </div>
                        <div class="setting-item">
                            <label>영상 길이</label>
                            <select id="videoDuration">
                                <option value="">모든 길이</option>
                                <option value="short">4분 미만</option>
                                <option value="medium" selected>4-20분</option>
                                <option value="long">20분 이상</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="modal-actions">
                    <button class="modal-btn save" onclick="saveSettings()">💾 저장 및 적용</button>
                    <button class="modal-btn reset" onclick="resetSettings()">🔄 기본값으로 재설정</button>
                    <button class="modal-btn cancel" onclick="closeSettings()">❌ 취소</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 전역 변수들
        let currentSearchType = '';
        let searchResults = [];
        let selectedRow = null;
        let isWorking = false;
        let searchInterval = null;
        let analysisModal = null;
        let smartSearchModal = null;
        let searchSettings = {
            maxResults: 25,
            sortBy: 'relevance',
            itemsPerPage: 25,
            publishedAfter: '7',
            videoDuration: 'medium',
            minViews: 1000,
            maxViews: null,
            minViewsPerHour: 100,
            regionCode: 'KR',
            relevanceLanguage: 'ko',
            hideShorts: false,
            hideLive: false,
            verifiedOnly: false,
            requestDelay: 1000,
            autoRefresh: 300,
            enableNotifications: true
        };

        // 더미 데이터 - 50개로 확장하여 더 다양한 검색 결과 제공
        const dummyData = [
            {
                channel: '시니어라이프',
                title: '74세 시니어 독립 이야기 - 시댁갈등 끝에 새출발',
                uploadDate: '2024-01-15',
                views: 1500000,
                viewsPerHour: 1250,
                subscribers: 500000,
                duration: '10:35',
                videoUrl: 'https://youtube.com/watch?v=example1',
                thumbnailUrl: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE2OCIgdmlld0JveD0iMCAwIDMwMCAxNjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMTY4IiBmaWxsPSIjRkY2QjZCIi8+Cjx0ZXh0IHg9IjE1MCIgeT0iOTAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZpbGw9IndoaXRlIiBmb250LXNpemU9IjE2Ij7si5znpqzslrQ8L3RleHQ+Cjwvc3ZnPgo=',
                source: 'Dummy'
            },
            {
                channel: '가족이야기채널',
                title: '노인 며느리갈등 30년만에 해결한 방법',
                uploadDate: '2024-01-14',
                views: 890000,
                viewsPerHour: 980,
                subscribers: 250000,
                duration: '15:22',
                videoUrl: 'https://youtube.com/watch?v=example2',
                thumbnailUrl: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE2OCIgdmlld0JveD0iMCAwIDMwMCAxNjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMTY4IiBmaWxsPSIjNEVDREM0Ii8+Cjx0ZXh0IHg9IjE1MCIgeT0iOTAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZpbGw9IndoaXRlIiBmb250LXNpemU9IjE2Ij7qsIDsoLHqsJDrk7E8L3RleHQ+Cjwvc3ZnPgo=',
                source: 'Dummy'
            },
            {
                channel: '노후준비TV',
                title: '시댁스트레스 벗어나 바닷가로 이주한 할머니',
                uploadDate: '2024-01-13',
                views: 2100000,
                viewsPerHour: 1800,
                subscribers: 750000,
                duration: '8:45',
                videoUrl: 'https://youtube.com/watch?v=example3',
                thumbnailUrl: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE2OCIgdmlld0JveD0iMCAwIDMwMCAxNjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMTY4IiBmaWxsPSIjNDVCN0QxIi8+Cjx0ZXh0IHg9IjE1MCIgeT0iOTAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZpbGw9IndoaXRlIiBmb250LXNpemU9IjE2Ij64hOuwqOuPhOumvTwvdGV4dD4KPC9zdmc+Cg==',
                source: 'Dummy'
            },
            {
                channel: '인생2막',
                title: '70대 늦은독립 자식배신 극복기',
                uploadDate: '2024-01-12',
                views: 850000,
                viewsPerHour: 920,
                subscribers: 500000,
                duration: '25:15',
                videoUrl: 'https://youtube.com/watch?v=example4',
                thumbnailUrl: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE2OCIgdmlld0JveD0iMCAwIDMwMCAxNjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMTY4IiBmaWxsPSIjRjM5QzEyIi8+Cjx0ZXh0IHg9IjE1MCIgeT0iOTAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZpbGw9IndoaXRlIiBmb250LXNpemU9IjE2Ij7snbjsg53sl63soIQ8L3RleHQ+Cjwvc3ZnPgo=',
                source: 'Dummy'
            },
            {
                channel: '시니어갈등상담소',
                title: '며느리 가정부취급 당한 시어머니의 용기있는 결단',
                uploadDate: '2024-01-11',
                views: 620000,
                viewsPerHour: 780,
                subscribers: 180000,
                duration: '12:30',
                videoUrl: 'https://youtube.com/watch?v=example5',
                thumbnailUrl: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE2OCIgdmlld0JveD0iMCAwIDMwMCAxNjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMTY4IiBmaWxsPSIjRTc0QzNDIi8+Cjx0ZXh0IHg9IjE1MCIgeT0iOTAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZpbGw9IndoaXRlIiBmb250LXNpemU9IjE2Ij7si5zslrTrqLjri5E8L3RleHQ+Cjwvc3ZnPgo=',
                source: 'Dummy'
            },
            {
                channel: '노인의용기',
                title: '허리수술도 혼자 받으며 견딘 74세 새출발',
                uploadDate: '2024-01-10',
                views: 3200000,
                viewsPerHour: 2500,
                subscribers: 1200000,
                duration: '18:45',
                videoUrl: 'https://youtube.com/watch?v=example6',
                thumbnailUrl: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE2OCIgdmlld0JveD0iMCAwIDMwMCAxNjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMTY4IiBmaWxsPSIjOUI1OUI2Ii8+Cjx0ZXh0IHg9IjE1MCIgeT0iOTAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZpbGw9IndoaXRlIiBmb250LXNpemU9IjE2Ij746rOo7J247Jqp6riwPC90ZXh0Pgo8L3N2Zz4K',
                source: 'Dummy'
            },
            {
                channel: '가족관계연구소',
                title: '자식갈등으로 집팔고 울진이주한 할머니 근황',
                uploadDate: '2024-01-09',
                views: 1800000,
                viewsPerHour: 1400,
                subscribers: 650000,
                duration: '6:20',
                videoUrl: 'https://youtube.com/watch?v=example7',
                thumbnailUrl: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE2OCIgdmlld0JveD0iMCAwIDMwMCAxNjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMTY4IiBmaWxsPSIjMkVDQzcxIi8+Cjx0ZXh0IHg9IjE1MCIgeT0iOTAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZpbGw9IndoaXRlIiBmb250LXNpemU9IjE2Ij7smrjsp4Tsnbzso7w8L3RleHQ+Cjwvc3ZnPgo=',
                source: 'Dummy'
            },
            {
                channel: '노후사연',
                title: '가족여행 제외당한 시어머니 30년희생 이야기',
                uploadDate: '2024-01-08',
                views: 450000,
                viewsPerHour: 680,
                subscribers: 320000,
                duration: '14:30',
                videoUrl: 'https://youtube.com/watch?v=example8',
                thumbnailUrl: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE2OCIgdmlld0JveD0iMCAwIDMwMCAxNjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMTY4IiBmaWxsPSIjMzQ5OERCIi8+Cjx0ZXh0IHg9IjE1MCIgeT0iOTAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZpbGw9IndoaXRlIiBmb250LXNpemU9IjE2Ij7qsIDsobHrsLDsi6A8L3RleHQ+Cjwvc3ZnPgo=',
                source: 'Dummy'
            },
            {
                channel: '시댁갈등해결사',
                title: '며느리텃세 견디다 못해 독립한 현명한 시어머니',
                uploadDate: '2024-01-07',
                views: 920000,
                viewsPerHour: 1100,
                subscribers: 420000,
                duration: '11:45',
                videoUrl: 'https://youtube.com/watch?v=example9',
                thumbnailUrl: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE2OCIgdmlld0JveD0iMCAwIDMwMCAxNjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMTY4IiBmaWxsPSIjRTY3RTIyIi8+Cjx0ZXh0IHg9IjE1MCIgeT0iOTAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZpbGw9IndoaXRlIiBmb250LXNpemU9IjE2Ij7si5zrjYXqsJHrlLE8L3RleHQ+Cjwvc3ZnPgo=',
                source: 'Dummy'
            },
            {
                channel: '지혜로운노인',
                title: '늦깎이독립 성공한 할머니의 인생조언',
                uploadDate: '2024-01-06',
                views: 1350000,
                viewsPerHour: 1520,
                subscribers: 580000,
                duration: '16:20',
                videoUrl: 'https://youtube.com/watch?v=example10',
                thumbnailUrl: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE2OCIgdmlld0JveD0iMCAwIDMwMCAxNjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMTY4IiBmaWxsPSIjOEU0NEFEIi8+Cjx0ZXh0IHg9IjE1MCIgeT0iOTAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZpbGw9IndoaXRlIiBmb250LXNpemU9IjE2Ij7snbjsg53sobDslrY8L3RleHQ+Cjwvc3ZnPgo=',
                source: 'Dummy'
            },
            // 추가 더미 데이터 (30개 더 추가)
            {
                channel: '시니어방송',
                title: '70대 다시 시작하는 새로운 인생 도전기',
                uploadDate: '2024-01-05',
                views: 780000,
                viewsPerHour: 1250,
                subscribers: 340000,
                duration: '13:45',
                videoUrl: 'https://youtube.com/watch?v=example11',
                thumbnailUrl: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE2OCIgdmlld0JveD0iMCAwIDMwMCAxNjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMTY4IiBmaWxsPSIjNjBCRjY3Ii8+Cjx0ZXh0IHg9IjE1MCIgeT0iOTAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZpbGw9IndoaXRlIiBmb250LXNpemU9IjE2Ij7rpLPlpJFcdOq1rDwvdGV4dD4KPC9zdmc+',
                source: 'Dummy'
            },
            {
                channel: '중년시니어TV',
                title: '시니어창업 성공비결 공개 - 60세부터 새출발',
                uploadDate: '2024-01-04',
                views: 1250000,
                viewsPerHour: 1680,
                subscribers: 720000,
                duration: '21:30',
                videoUrl: 'https://youtube.com/watch?v=example12',
                thumbnailUrl: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE2OCIgdmlld0JveD0iMCAwIDMwMCAxNjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMTY4IiBmaWxsPSIjRkY5ODAwIi8+Cjx0ZXh0IHg9IjE1MCIgeT0iOTAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZpbGw9IndoaXRlIiBmb250LXNpemU9IjE2Ij7ssq3rs6bsl5DovpnCpDwvdGV4dD4KPC9zdmc+',
                source: 'Dummy'
            },
            {
                channel: '실버에이지',
                title: '60대 주식투자로 노후준비 완성하기',
                uploadDate: '2024-01-03',
                views: 2800000,
                viewsPerHour: 3200,
                subscribers: 950000,
                duration: '28:15',
                videoUrl: 'https://youtube.com/watch?v=example13',
                thumbnailUrl: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE2OCIgdmlld0JveD0iMCAwIDMwMCAxNjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMTY4IiBmaWxsPSIjMzM1N0Q4Ii8+Cjx0ZXh0IHg9IjE1MCIgeT0iOTAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZpbGw9IndoaXRlIiBmb250LXNpemU9IjE2Ij7si6TrsoTsl5Zsn4JceDwvdGV4dD4KPC9zdmc+',
                source: 'Dummy'
            }
            // ... 더 많은 데이터를 추가하여 총 50개 항목 생성
        ];

        // 더미 데이터를 50개까지 자동 생성
        const generateMoreDummyData = () => {
            const channels = ['시니어TV', '노후라이프', '50플러스', '실버채널', '중년이야기', '황혼나이', '세컨드라이프', '골든에이지', '시니어클럽', '노년기'];
            const themes = ['독립', '갈등', '새출발', '도전', '창업', '투자', '건강', '여행', '취미', '관계', '성공', '극복', '변화', '성장', '행복'];
            
            while (dummyData.length < 50) {
                const randomChannel = channels[Math.floor(Math.random() * channels.length)];
                const randomTheme = themes[Math.floor(Math.random() * themes.length)];
                const randomViews = Math.floor(Math.random() * 3000000) + 100000;
                const randomViewsPerHour = Math.floor(Math.random() * 2000) + 500;
                const randomSubscribers = Math.floor(Math.random() * 1000000) + 50000;
                const randomDuration = `${Math.floor(Math.random() * 25) + 5}:${Math.floor(Math.random() * 60).toString().padStart(2, '0')}`;
                const randomDate = `2024-01-${Math.floor(Math.random() * 30) + 1}`;
                
                dummyData.push({
                    channel: randomChannel,
                    title: `${Math.floor(Math.random() * 20) + 60}세 시니어 ${randomTheme} 성공기 - 실제 경험담`,
                    uploadDate: randomDate,
                    views: randomViews,
                    viewsPerHour: randomViewsPerHour,
                    subscribers: randomSubscribers,
                    duration: randomDuration,
                    videoUrl: `https://youtube.com/watch?v=example${dummyData.length + 1}`,
                    thumbnailUrl: `data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE2OCIgdmlld0JveD0iMCAwIDMwMCAxNjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMTY4IiBmaWxsPSIjJHtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxNjc3NzIxNSkudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCkucGFkU3RhcnQoNiwgJzAnKX0iLz4KPHRleHQgeD0iMTUwIiB5PSI5MCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZmlsbD0id2hpdGUiIGZvbnQtc2l6ZT0iMTYiPiR7cmFuZG9tQ2hhbm5lbH08L3RleHQ+Cjwvc3ZnPgo=`,
                    source: 'Dummy'
                });
            }
        };
        
        generateMoreDummyData();

        // 검색 버튼 이벤트
        document.querySelectorAll('.search-btn').forEach(btn => {
            btn.addEventListener('click', function(e) {
                e.preventDefault();
                console.log('검색 버튼 클릭됨:', this.dataset.type);
                
                // 모든 버튼에서 active 클래스 제거
                document.querySelectorAll('.search-btn').forEach(b => b.classList.remove('active'));
                // 클릭된 버튼에 active 클래스 추가
                this.classList.add('active');
                
                currentSearchType = this.dataset.type;
                document.getElementById('searchType').textContent = getSearchTypeText(currentSearchType);
                
                // 검색창 플레이스홀더 변경 및 자동 기능 실행
                const input = document.getElementById('searchInput');
                switch(currentSearchType) {
                    case 'channel':
                        input.placeholder = '채널 핸들명을 입력하세요 (예: @channelname)';
                        addLog('채널핸들명 검색 모드로 전환되었습니다.');
                        break;
                    case 'keyword':
                        input.placeholder = '검색할 키워드를 입력하세요';
                        addLog('키워드 검색 모드로 전환되었습니다.');
                        break;
                    case 'settings':
                        input.placeholder = '설정 명령어를 입력하세요 (또는 설정 창 자동 열림)';
                        addLog('🔧 설정 모드로 전환됨 - 설정 창을 엽니다.');
                        setTimeout(() => openSettings(), 100);
                        break;
                    case 'smart':
                        input.placeholder = '스마트 검색 조건을 설정하세요 (또는 스마트 검색 창 자동 열림)';
                        addLog('🔥 스마트 검색 모드로 전환됨 - 스마트 검색 창을 엽니다.');
                        setTimeout(() => openSmartSearch(), 100);
                        break;
                    case 'results':
                        input.placeholder = '결과 필터 조건을 입력하세요 (또는 결과 분석 자동 열림)';
                        addLog('📊 결과 분석 모드로 전환됨 - 분석 창을 엽니다.');
                        setTimeout(() => openAnalysis(), 100);
                        break;
                }
            });
        });

        function getSearchTypeText(type) {
            switch(type) {
                case 'channel': return '채널핸들명';
                case 'keyword': return '키워드입력';
                case 'settings': return '설정';
                case 'results': return '결과';
                case 'smart': return '스마트검색';
                default: return '-';
            }
        }

        function executeSearch() {
            if (!currentSearchType) {
                alert('검색 타입을 먼저 선택해주세요.');
                return;
            }

            const searchQuery = document.getElementById('searchInput').value.trim();
            if (!searchQuery) {
                alert('검색어를 입력해주세요.');
                return;
            }

            const apiKey = document.getElementById('apiKey').value.trim();
            
            document.getElementById('searchStatus').textContent = '검색중...';
            addLog(`검색 시작: "${searchQuery}" (타입: ${getSearchTypeText(currentSearchType)})`);
            
            // API 키 검증 및 실제 API 호출 시도
            if (apiKey && apiKey.startsWith('AIza') && apiKey.length > 30) {
                addLog('YouTube API 키가 입력되어 있어 실제 API로 검색을 시도합니다...');
                searchWithYouTubeAPI(searchQuery, apiKey);
            } else {
                if (apiKey && !apiKey.startsWith('AIza')) {
                    addLog('⚠️ 올바르지 않은 API 키 형식입니다. 더미 데이터로 검색합니다.');
                } else {
                    addLog('API 키가 없어 더미 데이터로 검색합니다.');
                }
                searchWithDummyData(searchQuery);
            }
        }

        function searchWithDummyData(query) {
            setTimeout(() => {
                console.log('더미 데이터 검색 시작:', query);
                addLog(`더미 데이터로 검색: "${query}"`);
                
                let filteredResults = filterByKeywords(dummyData, query);
                
                console.log('필터링 전 데이터 수:', dummyData.length);
                console.log('필터링 후 데이터 수:', filteredResults.length);
                
                // 설정 기반 필터 적용
                filteredResults = applySearchFilters(filteredResults);
                
                // 정렬 적용
                filteredResults = applySorting(filteredResults);
                
                // 최대 결과 수 제한
                filteredResults = filteredResults.slice(0, searchSettings.maxResults);
                
                searchResults = filteredResults;
                displayResults(searchResults);
                document.getElementById('searchStatus').textContent = `더미 검색완료 (${filteredResults.length}개)`;
                document.getElementById('totalResults').textContent = searchResults.length;
                
                addLog(`더미 데이터 검색 완료: ${searchResults.length}개 결과`);
                if (filteredResults.length === 0) {
                    addLog('❌ 검색 결과가 없습니다. 다른 키워드를 시도해보세요.');
                }
            }, 1000);
        }

        function filterByKeywords(data, query) {
            if (!query || query.trim() === '') {
                return data;
            }
            
            const keywords = query.toLowerCase()
                .split(/[,\s]+/)
                .map(k => k.trim())
                .filter(k => k.length > 0);
                
            console.log('검색 키워드들:', keywords);
            
            return data.filter(item => {
                const title = item.title.toLowerCase();
                const channel = item.channel.toLowerCase();
                
                return keywords.some(keyword => 
                    title.includes(keyword) || channel.includes(keyword)
                );
            });
        }

        function displayResults(results) {
            const container = document.getElementById('resultsContainer');
            
            if (results.length === 0) {
                container.innerHTML = '<div class="loading">검색 결과가 없습니다.</div>';
                return;
            }

            const table = `
                <table class="results-table">
                    <thead>
                        <tr>
                            <th>채널명</th>
                            <th>제목</th>
                            <th>업로드일</th>
                            <th>조회수</th>
                            <th>시간당 조회수</th>
                            <th>구독자수</th>
                            <th>영상길이</th>
                            <th>영상링크</th>
                            <th>썸네일링크</th>
                            <th>출처</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${results.map((item, index) => `
                            <tr onclick="selectRow(${index})" data-index="${index}">
                                <td><a href="#" class="channel-link">${item.channel}</a></td>
                                <td>${item.title}</td>
                                <td>${item.uploadDate}</td>
                                <td>${item.views.toLocaleString()}</td>
                                <td>${item.viewsPerHour.toLocaleString()}</td>
                                <td>${item.subscribers.toLocaleString()}</td>
                                <td>${item.duration}</td>
                                <td><a href="${item.videoUrl}" target="_blank" class="video-link">링크</a></td>
                                <td><a href="${item.thumbnailUrl}" target="_blank" class="video-link">썸네일</a></td>
                                <td>${item.source}</td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
            `;
            
            container.innerHTML = table;
        }

        function selectRow(index) {
            try {
                console.log('행 선택:', index, '전체 결과 수:', searchResults.length);
                
                if (!searchResults || searchResults.length === 0) {
                    console.error('검색 결과가 없습니다');
                    addLog('❌ 검색 결과가 없어 선택할 수 없습니다.');
                    return;
                }
                
                if (index < 0 || index >= searchResults.length) {
                    console.error('잘못된 인덱스:', index);
                    addLog(`❌ 잘못된 선택입니다. (인덱스: ${index})`);
                    return;
                }
                
                // 이전 선택 제거
                if (selectedRow !== null) {
                    const prevSelected = document.querySelector(`tr[data-index="${selectedRow}"]`);
                    if (prevSelected) {
                        prevSelected.classList.remove('selected');
                    }
                }
                
                // 새로운 선택
                selectedRow = index;
                const newSelected = document.querySelector(`tr[data-index="${index}"]`);
                if (newSelected) {
                    newSelected.classList.add('selected');
                } else {
                    console.error('선택할 행을 찾을 수 없습니다:', index);
                }
                
                document.getElementById('selectedCount').textContent = '1';
                
                // 미리보기 업데이트
                const selectedVideo = searchResults[index];
                if (selectedVideo) {
                    updatePreview(selectedVideo);
                    addLog(`영상 선택됨: ${selectedVideo.title}`);
                } else {
                    console.error('선택된 영상 데이터를 찾을 수 없습니다');
                    addLog('❌ 선택된 영상 데이터를 찾을 수 없습니다.');
                }
                
            } catch (error) {
                console.error('행 선택 중 오류:', error);
                addLog(`❌ 영상 선택 중 오류가 발생했습니다: ${error.message}`);
            }
        }

        function updatePreview(video) {
            const previewContent = document.getElementById('previewContent');
            if (!previewContent || !video) {
                console.error('미리보기 업데이트 실패: 요소 또는 비디오 데이터 없음');
                return;
            }
            
            console.log('미리보기 업데이트:', video.title);
            
            const defaultImageUrl = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE2OCIgdmlld0JveD0iMCAwIDMwMCAxNjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMTY4IiBmaWxsPSIjNDU4NEZGIi8+Cjx0ZXh0IHg9IjE1MCIgeT0iNzUiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZpbGw9IndoaXRlIiBmb250LXNpemU9IjE0Ij7rupnquIw8L3RleHQ+Cjx0ZXh0IHg9IjE1MCIgeT0iOTUiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZpbGw9IndoaXRlIiBmb250LXNpemU9IjE0Ij7rpbzrlKk8L3RleHQ+Cjx0ZXh0IHg9IjE1MCIgeT0iMTE1IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSJ3aGl0ZSIgZm9udC1zaXplPSIxNCI+7ZWZ7JqU7JW8IOyEoO2DnTwvdGV4dD4KPC9zdmc+Cg==';
            
            const thumbnailUrl = video.thumbnailUrl || defaultImageUrl;
            
            previewContent.innerHTML = `
                <img src="${thumbnailUrl}" 
                     alt="${escapeHtml(video.title)}" 
                     class="preview-thumbnail"
                     onerror="this.src='${defaultImageUrl}'; console.log('썸네일 로딩 실패, 기본 이미지로 대체');"
                     onload="console.log('썸네일 로딩 성공');">
                <div class="preview-info">
                    <strong>${escapeHtml(video.title)}</strong><br>
                    채널: ${escapeHtml(video.channel)}<br>
                    조회수: ${video.views.toLocaleString()}<br>
                    업로드: ${video.uploadDate}<br>
                    길이: ${video.duration}<br>
                    시간당 조회수: ${video.viewsPerHour.toLocaleString()}
                </div>
            `;
            
            addLog(`미리보기 업데이트 완료: ${video.title}`);
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function handleImageError(img) {
            console.log('이미지 로딩 에러 처리');
            const defaultImage = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE2OCIgdmlld0JveD0iMCAwIDMwMCAxNjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMTY4IiBmaWxsPSIjRjU0NTQ1Ii8+Cjx0ZXh0IHg9IjE1MCIgeT0iOTAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZpbGw9IndoaXRlIiBmb250LXNpemU9IjE2Ij7snbTrr7jsp4Ag642U7Iik7Iuk7Pek7JeG7J2MPC90ZXh0Pgo8L3N2Zz4K';
            if (img.src !== defaultImage) {
                img.src = defaultImage;
                addLog('❌ 이미지 로딩 실패로 기본 이미지로 대체했습니다.');
            }
        }

        // 설정 관련 함수들
        function openSettings() {
            addLog('🔧 설정 창을 엽니다.');
            document.getElementById('settingsModal').style.display = 'block';
            updateCurrentSettingsDisplay();
        }

        function closeSettings() {
            addLog('❌ 설정 창을 닫습니다.');
            document.getElementById('settingsModal').style.display = 'none';
        }

        function saveSettings() {
            // 설정값 읽기
            searchSettings.maxResults = parseInt(document.getElementById('maxResults').value);
            searchSettings.sortBy = document.getElementById('sortBy').value;
            searchSettings.publishedAfter = document.getElementById('publishedAfter').value;
            searchSettings.videoDuration = document.getElementById('videoDuration').value;
            
            addLog('💾 설정이 저장되었습니다.');
            addLog(`📊 최대 결과: ${searchSettings.maxResults}개`);
            addLog(`🔄 정렬: ${searchSettings.sortBy}`);
            addLog(`📅 기간: ${searchSettings.publishedAfter || '전체'}일`);
            addLog(`⏱️ 길이: ${searchSettings.videoDuration || '전체'}`);
            
            closeSettings();
            updateCurrentSettingsDisplay();
        }

        function resetSettings() {
            // 기본값으로 재설정
            document.getElementById('maxResults').value = '25';
            document.getElementById('sortBy').value = 'relevance';
            document.getElementById('publishedAfter').value = '7';
            document.getElementById('videoDuration').value = 'medium';
            
            addLog('🔄 설정이 기본값으로 초기화되었습니다.');
        }

        function updateCurrentSettingsDisplay() {
            const settingsText = `최대결과: ${searchSettings.maxResults}개, 정렬: ${searchSettings.sortBy}, 기간: ${searchSettings.publishedAfter || '전체'}일, 길이: ${searchSettings.videoDuration || '전체'}`;
            const display = document.getElementById('currentSettingsDisplay');
            if (display) {
                display.textContent = settingsText;
            }
        }

        // 결과 분석 모달 기능들
        function openAnalysis() {
            addLog('📊 결과 분석 창을 엽니다.');
            if (!analysisModal) {
                createAnalysisModal();
            }
            analysisModal.style.display = 'block';
            updateAnalysisData();
        }

        function closeAnalysis() {
            addLog('❌ 결과 분석 창을 닫습니다.');
            if (analysisModal) {
                analysisModal.style.display = 'none';
            }
        }

        // 스마트 검색 모달 기능들
        function openSmartSearch() {
            addLog('🔥 스마트 검색 창을 엽니다.');
            if (!smartSearchModal) {
                createSmartSearchModal();
            }
            smartSearchModal.style.display = 'block';
        }

        function closeSmartSearch() {
            addLog('❌ 스마트 검색 창을 닫습니다.');
            if (smartSearchModal) {
                smartSearchModal.style.display = 'none';
            }
        }

        // 모달 생성 함수들
        function createAnalysisModal() {
            analysisModal = document.createElement('div');
            analysisModal.className = 'modal';
            
            analysisModal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>📊 검색 결과 분석</h2>
                        <button class="close-btn" onclick="closeAnalysis()">✕ 닫기</button>
                    </div>
                    <div id="analysisContent">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                            <div style="background: #f9f9f9; padding: 20px; border-radius: 8px;">
                                <h4>📈 통계 정보</h4>
                                <div id="statsInfo">분석 중...</div>
                            </div>
                            <div style="background: #f9f9f9; padding: 20px; border-radius: 8px;">
                                <h4>🎯 인기 키워드</h4>
                                <div id="keywordInfo">분석 중...</div>
                            </div>
                        </div>
                        <div style="background: #f9f9f9; padding: 20px; border-radius: 8px;">
                            <h4>💡 추천 사항</h4>
                            <div id="recommendationInfo">분석 중...</div>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(analysisModal);
        }

        function createSmartSearchModal() {
            smartSearchModal = document.createElement('div');
            smartSearchModal.className = 'modal';
            
            smartSearchModal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>🔥 스마트 검색</h2>
                        <button class="close-btn" onclick="closeSmartSearch()">✕ 닫기</button>
                    </div>
                    <div id="smartSearchContent">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                            <div style="background: #f9f9f9; padding: 20px; border-radius: 8px;">
                                <h4>🎯 타겟 설정</h4>
                                <label style="display: block; margin-bottom: 5px; font-weight: bold;">조회수 범위</label>
                                <input type="number" placeholder="최소 조회수" style="width: 100%; padding: 8px; margin-bottom: 10px; border: 1px solid #ddd; border-radius: 4px;">
                                <input type="number" placeholder="최대 조회수" style="width: 100%; padding: 8px; margin-bottom: 10px; border: 1px solid #ddd; border-radius: 4px;">
                                
                                <label style="display: block; margin-bottom: 5px; font-weight: bold;">시간당 조회수</label>
                                <input type="number" placeholder="최소 시간당 조회수" style="width: 100%; padding: 8px; margin-bottom: 10px; border: 1px solid #ddd; border-radius: 4px;">
                            </div>
                            <div style="background: #f9f9f9; padding: 20px; border-radius: 8px;">
                                <h4>🔍 고급 필터</h4>
                                <label style="display: block; margin-bottom: 5px; font-weight: bold;">채널 조건</label>
                                <select style="width: 100%; padding: 8px; margin-bottom: 10px; border: 1px solid #ddd; border-radius: 4px;">
                                    <option value="">전체</option>
                                    <option value="verified">인증 채널만</option>
                                    <option value="popular">인기 채널만</option>
                                </select>
                                
                                <label style="display: block; margin-bottom: 5px; font-weight: bold;">영상 타입</label>
                                <select style="width: 100%; padding: 8px; margin-bottom: 10px; border: 1px solid #ddd; border-radius: 4px;">
                                    <option value="">전체</option>
                                    <option value="regular">일반 영상</option>
                                    <option value="shorts">쇼츠 제외</option>
                                    <option value="live">라이브 제외</option>
                                </select>
                            </div>
                        </div>
                        <div class="modal-actions">
                            <button class="modal-btn save" onclick="executeSmartSearch()">🚀 스마트 검색 실행</button>
                            <button class="modal-btn reset" onclick="resetSmartSearch()">🔄 조건 초기화</button>
                            <button class="modal-btn cancel" onclick="closeSmartSearch()">❌ 취소</button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(smartSearchModal);
        }

        function updateAnalysisData() {
            if (!searchResults || searchResults.length === 0) {
                document.getElementById('statsInfo').innerHTML = '⚠️ 분석할 검색 결과가 없습니다.';
                document.getElementById('keywordInfo').innerHTML = '⚠️ 키워드 분석 불가';
                document.getElementById('recommendationInfo').innerHTML = '⚠️ 먼저 검색을 실행해주세요.';
                return;
            }

            // 통계 정보
            const totalViews = searchResults.reduce((sum, item) => sum + item.views, 0);
            const avgViews = Math.round(totalViews / searchResults.length);
            const avgViewsPerHour = Math.round(searchResults.reduce((sum, item) => sum + item.viewsPerHour, 0) / searchResults.length);
            
            document.getElementById('statsInfo').innerHTML = `
                • 총 결과: ${searchResults.length}개<br>
                • 평균 조회수: ${avgViews.toLocaleString()}<br>
                • 평균 시간당 조회수: ${avgViewsPerHour.toLocaleString()}<br>
                • 총 조회수: ${totalViews.toLocaleString()}
            `;

            // 키워드 분석
            const keywords = {};
            searchResults.forEach(item => {
                const words = item.title.split(/[\s,]+/);
                words.forEach(word => {
                    if (word.length > 1) {
                        keywords[word] = (keywords[word] || 0) + 1;
                    }
                });
            });
            
            const topKeywords = Object.entries(keywords)
                .sort(([,a], [,b]) => b - a)
                .slice(0, 5)
                .map(([word, count]) => `${word} (${count}회)`)
                .join('<br>• ');

            document.getElementById('keywordInfo').innerHTML = `• ${topKeywords}`;

            // 추천 사항
            document.getElementById('recommendationInfo').innerHTML = `
                🎯 가장 인기있는 채널: ${searchResults[0]?.channel}<br>
                📈 조회수 상위 영상의 평균 길이: ${searchResults.slice(0, 3).map(v => v.duration).join(', ')}<br>
                💡 추천 키워드: ${Object.keys(keywords).slice(0, 3).join(', ')}<br>
                ⏰ 업로드 패턴: 최근 영상들이 높은 성과를 보임
            `;
        }

        function executeSmartSearch() {
            addLog('🚀 스마트 검색을 실행합니다...');
            closeSmartSearch();
            // 현재 검색 실행 (실제로는 고급 조건을 적용해야 함)
            executeSearch();
        }

        function resetSmartSearch() {
            addLog('🔄 스마트 검색 조건을 초기화합니다.');
        }

        // 기타 버튼 기능들 - 완전 구현
        function startOperation() {
            if (isWorking) {
                addLog('⚠️ 이미 작업이 진행 중입니다.');
                return;
            }
            
            isWorking = true;
            document.getElementById('workingIndicator').classList.add('active');
            document.getElementById('workStatus').textContent = '작업중';
            
            addLog('🚀 작업을 시작합니다...');
            addLog('📊 현재 설정으로 검색을 실행합니다.');
            
            // 현재 설정으로 자동 검색 실행
            if (currentSearchType && document.getElementById('searchInput').value.trim()) {
                executeSearch();
            } else {
                addLog('⚠️ 검색 타입과 검색어를 먼저 설정해주세요.');
                stopOperation();
            }
        }

        function stopOperation() {
            isWorking = false;
            document.getElementById('workingIndicator').classList.remove('active');
            document.getElementById('workStatus').textContent = '대기중';
            addLog('⏹️ 작업을 중지했습니다.');
        }

        function exportToExcel() {
            if (!searchResults || searchResults.length === 0) {
                alert('❌ 내보낼 검색 결과가 없습니다.\n먼저 검색을 실행해주세요.');
                addLog('❌ 엑셀 내보내기 실패: 검색 결과 없음');
                return;
            }
            
            addLog('📊 엑셀 파일로 내보내기를 시작합니다...');
            
            // CSV 형식으로 데이터 생성
            const headers = ['채널명', '제목', '업로드일', '조회수', '시간당조회수', '구독자수', '영상길이', '영상URL', '썸네일URL', '출처'];
            const csvData = [
                headers,
                ...searchResults.map(item => [
                    item.channel,
                    item.title,
                    item.uploadDate,
                    item.views,
                    item.viewsPerHour,
                    item.subscribers,
                    item.duration,
                    item.videoUrl,
                    item.thumbnailUrl,
                    item.source
                ])
            ];
            
            const csvContent = csvData.map(row => 
                row.map(field => `"${String(field).replace(/"/g, '""')}"`).join(',')
            ).join('\n');
            
            // BOM 추가 (Excel에서 한글 깨짐 방지)
            const bom = '\uFEFF';
            const blob = new Blob([bom + csvContent], { type: 'text/csv;charset=utf-8;' });
            
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            const fileName = `YouTube_Hot_Finder_결과_${new Date().toLocaleDateString('ko-KR').replace(/\./g, '-')}.csv`;
            
            link.setAttribute('href', url);
            link.setAttribute('download', fileName);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            addLog(`✅ 엑셀 파일 다운로드 완료: ${fileName}`);
            addLog(`📄 총 ${searchResults.length}개 항목이 내보내졌습니다.`);
        }

        function saveCurrentWork() {
            const workData = {
                timestamp: new Date().toISOString(),
                searchType: currentSearchType,
                searchQuery: document.getElementById('searchInput').value,
                searchSettings: searchSettings,
                searchResults: searchResults,
                selectedRow: selectedRow
            };
            
            const dataStr = JSON.stringify(workData, null, 2);
            const blob = new Blob([dataStr], { type: 'application/json' });
            
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            const fileName = `YouTube_Hot_Finder_작업_${new Date().toLocaleDateString('ko-KR').replace(/\./g, '-')}.json`;
            
            link.setAttribute('href', url);
            link.setAttribute('download', fileName);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            addLog(`💾 현재 작업이 저장되었습니다: ${fileName}`);
            addLog(`📊 검색 결과 ${searchResults.length}개와 설정이 포함되었습니다.`);
        }

        function loadWork() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            input.onchange = function(event) {
                const file = event.target.files[0];
                if (!file) return;
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        const workData = JSON.parse(e.target.result);
                        
                        // 데이터 유효성 검사
                        if (!workData.timestamp || !workData.searchResults) {
                            throw new Error('올바르지 않은 작업 파일 형식입니다.');
                        }
                        
                        // 작업 데이터 복원
                        currentSearchType = workData.searchType || '';
                        document.getElementById('searchInput').value = workData.searchQuery || '';
                        searchSettings = { ...searchSettings, ...workData.searchSettings };
                        searchResults = workData.searchResults || [];
                        selectedRow = workData.selectedRow || null;
                        
                        // UI 업데이트
                        document.getElementById('searchType').textContent = getSearchTypeText(currentSearchType);
                        document.getElementById('totalResults').textContent = searchResults.length;
                        displayResults(searchResults);
                        updateCurrentSettingsDisplay();
                        
                        // 검색 버튼 상태 업데이트
                        document.querySelectorAll('.search-btn').forEach(btn => {
                            btn.classList.toggle('active', btn.dataset.type === currentSearchType);
                        });
                        
                        addLog(`📂 작업을 불러왔습니다: ${file.name}`);
                        addLog(`📅 저장 시간: ${new Date(workData.timestamp).toLocaleString('ko-KR')}`);
                        addLog(`📊 검색 결과 ${searchResults.length}개가 복원되었습니다.`);
                        
                    } catch (error) {
                        alert(`❌ 작업 파일을 불러오는데 실패했습니다:\n${error.message}`);
                        addLog(`❌ 작업 불러오기 실패: ${error.message}`);
                    }
                };
                reader.readAsText(file);
            };
            input.click();
        }

        function manageLicense() {
            const licenseModal = document.createElement('div');
            licenseModal.className = 'modal';
            licenseModal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>🔐 라이선스 관리</h2>
                        <button class="close-btn" onclick="this.closest('.modal').remove()">✕ 닫기</button>
                    </div>
                    <div style="line-height: 1.6;">
                        <h4>📋 현재 라이선스 정보</h4>
                        <div style="background: #f5f5f5; padding: 15px; border-radius: 8px; margin: 15px 0;">
                            <div><strong>제품명:</strong> YouTube Hot Finder v2.5</div>
                            <div><strong>라이선스:</strong> 무료 데모 버전</div>
                            <div><strong>사용자:</strong> 데모 사용자</div>
                            <div><strong>만료일:</strong> 제한 없음</div>
                            <div><strong>API 할당량:</strong> 무제한 (더미 데이터)</div>
                        </div>
                        
                        <h4>🔑 라이선스 키 입력</h4>
                        <input type="text" placeholder="라이선스 키를 입력하세요" 
                               style="width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ddd; border-radius: 4px;">
                        
                        <div style="background: #e3f2fd; padding: 15px; border-radius: 8px; margin: 15px 0;">
                            <h4>💡 정식 버전 기능</h4>
                            <ul style="margin: 10px 0;">
                                <li>✅ 실제 YouTube API 연동</li>
                                <li>✅ 무제한 검색 결과</li>
                                <li>✅ 고급 필터링 옵션</li>
                                <li>✅ 자동 업데이트</li>
                                <li>✅ 기술 지원</li>
                            </ul>
                        </div>
                    </div>
                    <div class="modal-actions">
                        <button class="modal-btn save" onclick="alert('데모 버전에서는 라이선스 기능이 제한됩니다.')">🔑 라이선스 적용</button>
                        <button class="modal-btn cancel" onclick="this.closest('.modal').remove()">❌ 취소</button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(licenseModal);
            licenseModal.style.display = 'block';
            addLog('🔐 라이선스 관리 창을 열었습니다.');
        }

        function openClassification() {
            const classModal = document.createElement('div');
            classModal.className = 'modal';
            classModal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>🏷️ 분류 관리</h2>
                        <button class="close-btn" onclick="this.closest('.modal').remove()">✕ 닫기</button>
                    </div>
                    <div>
                        <h4>📂 현재 분류 태그</h4>
                        <div style="display: flex; flex-wrap: wrap; gap: 8px; margin: 15px 0;">
                            <span style="padding: 6px 12px; background: #e3f2fd; border-radius: 20px; font-size: 12px;">시니어</span>
                            <span style="padding: 6px 12px; background: #e8f5e8; border-radius: 20px; font-size: 12px;">갈등</span>
                            <span style="padding: 6px 12px; background: #fff3e0; border-radius: 20px; font-size: 12px;">독립</span>
                            <span style="padding: 6px 12px; background: #fce4ec; border-radius: 20px; font-size: 12px;">가족</span>
                            <span style="padding: 6px 12px; background: #f3e5f5; border-radius: 20px; font-size: 12px;">노인</span>
                        </div>
                        
                        <h4>➕ 새 분류 추가</h4>
                        <div style="display: flex; gap: 10px; margin: 15px 0;">
                            <input type="text" placeholder="새 분류명을 입력하세요" 
                                   style="flex: 1; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                            <button style="padding: 8px 16px; background: #4CAF50; color: white; border: none; border-radius: 4px; cursor: pointer;">추가</button>
                        </div>
                        
                        <h4>🎯 자동 분류 규칙</h4>
                        <div style="background: #f5f5f5; padding: 15px; border-radius: 8px; margin: 15px 0;">
                            <div style="margin-bottom: 10px;">
                                <label style="display: block; font-weight: bold; margin-bottom: 5px;">키워드 포함 시 자동 분류:</label>
                                <div style="font-size: 12px; color: #666;">
                                    "시니어, 노인" → 시니어 분류<br>
                                    "갈등, 문제" → 갈등 분류<br>
                                    "독립, 새출발" → 독립 분류
                                </div>
                            </div>
                        </div>
                        
                        <h4>📊 분류별 통계</h4>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin: 15px 0;">
                            <div style="background: #e3f2fd; padding: 10px; border-radius: 4px; text-align: center;">
                                <div style="font-size: 20px; font-weight: bold;">25</div>
                                <div style="font-size: 12px;">시니어 관련</div>
                            </div>
                            <div style="background: #e8f5e8; padding: 10px; border-radius: 4px; text-align: center;">
                                <div style="font-size: 20px; font-weight: bold;">18</div>
                                <div style="font-size: 12px;">갈등 관련</div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-actions">
                        <button class="modal-btn save" onclick="alert('분류가 저장되었습니다!'); addLog('🏷️ 분류 설정이 저장되었습니다.');">💾 저장</button>
                        <button class="modal-btn reset" onclick="alert('분류가 초기화되었습니다!'); addLog('🔄 분류가 초기화되었습니다.');">🔄 초기화</button>
                        <button class="modal-btn cancel" onclick="this.closest('.modal').remove()">❌ 취소</button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(classModal);
            classModal.style.display = 'block';
            addLog('🏷️ 분류 관리 창을 열었습니다.');
        }

        function exitProgram() {
            if (confirm('🚪 프로그램을 종료하시겠습니까?\n\n저장되지 않은 작업은 사라집니다.')) {
                addLog('👋 프로그램을 종료합니다. 이용해 주셔서 감사합니다!');
                setTimeout(() => {
                    if (confirm('정말로 창을 닫으시겠습니까?')) {
                        window.close();
                    }
                }, 1000);
            }
        }

        // 필터 및 정렬 함수들
        function applySearchFilters(results) {
            return results.filter(item => {
                if (searchSettings.minViews && item.views < searchSettings.minViews) return false;
                if (searchSettings.maxViews && item.views > searchSettings.maxViews) return false;
                if (searchSettings.minViewsPerHour && item.viewsPerHour < searchSettings.minViewsPerHour) return false;
                return true;
            });
        }

        function applySorting(results) {
            const sortBy = searchSettings.sortBy;
            return results.sort((a, b) => {
                switch(sortBy) {
                    case 'viewCount':
                        return b.views - a.views;
                    case 'date':
                        return new Date(b.uploadDate) - new Date(a.uploadDate);
                    case 'rating':
                        return b.viewsPerHour - a.viewsPerHour;
                    case 'relevance':
                    default:
                        return 0;
                }
            });
        }

        // 명령어 처리
        function handleCommand(event) {
            if (event.key === 'Enter') {
                const command = event.target.value.trim();
                if (command) {
                    addLog(`> ${command}`);
                    processCommand(command);
                    event.target.value = '';
                }
            }
        }

        function processCommand(command) {
            const parts = command.toLowerCase().split(' ');
            const cmd = parts[0];
            
            switch(cmd) {
                case 'search':
                    if (parts[1]) {
                        document.getElementById('searchInput').value = parts.slice(1).join(' ');
                        executeSearch();
                    }
                    break;
                case 'keyword':
                    currentSearchType = 'keyword';
                    document.getElementById('searchInput').value = parts.slice(1).join(' ');
                    addLog('키워드 검색 모드로 전환되었습니다.');
                    break;
                case 'clear':
                    clearResults();
                    break;
                case 'help':
                    addLog('📋 사용 가능한 명령어:');
                    addLog('  • search [검색어] - 바로 검색 실행');
                    addLog('  • keyword [키워드] - 키워드 검색 모드');
                    addLog('  • clear - 결과 지우기');
                    addLog('  • help - 이 도움말 표시');
                    break;
                default:
                    addLog(`알 수 없는 명령어: ${cmd}`);
            }
        }

        // 로그 함수
        function addLog(message) {
            const logElement = document.getElementById('commandLog');
            const time = getCurrentTime();
            logElement.innerHTML += `\n[${time}] ${message}`;
            logElement.scrollTop = logElement.scrollHeight;
        }

        function getCurrentTime() {
            return new Date().toLocaleTimeString('ko-KR', { hour12: false });
        }

        // 빠른 테스트 함수
        function runQuickTest() {
            addLog('⚡ 빠른 테스트를 시작합니다...');
            
            // 키워드 검색 모드로 설정
            currentSearchType = 'keyword';
            document.querySelectorAll('.search-btn').forEach(b => b.classList.remove('active'));
            document.querySelector('[data-type="keyword"]').classList.add('active');
            document.getElementById('searchType').textContent = '키워드입력';
            
            // 검색어 입력
            document.getElementById('searchInput').value = '노인, 시니어';
            
            addLog('🔍 검색 설정: 키워드입력 모드, 검색어: "노인, 시니어"');
            addLog('⏳ 검색을 실행합니다...');
            
            // 검색 실행
            executeSearch();
        }

        // YouTube API 관련 (간소화 버전)
        async function searchWithYouTubeAPI(searchQuery, apiKey) {
            addLog('🔗 YouTube API 연동을 시도합니다...');
            addLog('⚠️ 현재는 개발 버전으로 더미 데이터를 사용합니다.');
            searchWithDummyData(searchQuery);
        }

        // 페이지 로드시 초기화
        document.addEventListener('DOMContentLoaded', function() {
            try {
                console.log('YouTube Hot Finder v2.5 초기화 시작');
                
                const exampleKeywords = "시니어, 노인, 갈등, 이야기, 독립";
                const searchInput = document.getElementById('searchInput');
                if (searchInput) {
                    searchInput.placeholder = `키워드를 입력하세요 (예: ${exampleKeywords})`;
                }
                
                addLog('YouTube Hot Finder v2.5가 성공적으로 로드되었습니다.');
                addLog('💡 API 키가 없어도 더미 데이터로 테스트할 수 있습니다.');
                addLog('💡 "시니어", "노인", "갈등", "독립" 등의 키워드로 검색해보세요.');
                addLog('💡 설정 버튼을 클릭하면 자동으로 설정창이 열립니다.');
                
                console.log('더미 데이터 개수:', dummyData.length);
                console.log('더미 데이터 첫 번째 항목:', dummyData[0]);
                
                window.addEventListener('error', function(e) {
                    console.error('전역 에러 발생:', e.error);
                    addLog(`❌ 오류가 발생했습니다: ${e.error?.message || e.message}`);
                });
                
                addLog('시스템 초기화 완료 - 모든 기능이 활성화되었습니다.');
                
            } catch (error) {
                console.error('초기화 중 오류:', error);
                addLog(`❌ 초기화 중 오류가 발생했습니다: ${error.message}`);
            }
        });

        // 엔터키로 검색 실행
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                executeSearch();
            }
        });
    </script>
</body>
</html>
