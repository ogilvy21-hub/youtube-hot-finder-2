<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Hot Finder v2.5</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f5f5f5;
            color: #333;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 30px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .top-panel {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        .search-section {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        .control-section {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        .main-content {
            display: flex;
            gap: 20px;
        }
        
        .center-panel {
            flex: 3;
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .right-panel {
            flex: 1;
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            height: fit-content;
        }
        
        .search-buttons {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            justify-content: center;
        }
        
        .search-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 5px;
            background: #4CAF50;
            color: white;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.3s;
        }
        
        .search-btn:hover {
            background: #45a049;
        }
        
        .search-btn.active {
            background: #2196F3;
        }
        
        .search-input-container {
            display: flex;
            gap: 10px;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .search-input {
            flex: 1;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }
        
        .execute-btn {
            padding: 12px 20px;
            background: #FF5722;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            white-space: nowrap;
        }
        
        .execute-btn:hover {
            background: #e64a19;
        }
        
        .control-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }
        
        .control-btn {
            padding: 8px 12px;
            border: none;
            border-radius: 4px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .control-btn.start { background: #4CAF50; color: white; }
        .control-btn.stop { background: #f44336; color: white; }
        .control-btn.clear { background: #ff9800; color: white; }
        .control-btn.excel { background: #2196F3; color: white; }
        .control-btn.save { background: #9c27b0; color: white; }
        .control-btn.load { background: #607d8b; color: white; }
        .control-btn.license { background: #795548; color: white; }
        .control-btn.exit { background: #424242; color: white; }
        
        .control-btn:hover {
            opacity: 0.8;
            transform: translateY(-1px);
        }
        
        .api-section {
            display: flex;
            gap: 15px;
            align-items: flex-start;
        }
        
        .api-input {
            flex: 2;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 3px;
            font-size: 12px;
            height: 80px;
            resize: vertical;
        }
        
        .stats-section {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .results-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            font-size: 12px;
        }
        
        .results-table th,
        .results-table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        
        .results-table th {
            background: #f2f2f2;
            font-weight: bold;
            position: sticky;
            top: 0;
        }
        
        .results-table tr:hover {
            background: #f5f5f5;
            cursor: pointer;
        }
        
        .results-table tr.selected {
            background: #e3f2fd;
        }
        
        .preview-area {
            text-align: center;
        }
        
        .preview-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
        }
        
        .preview-thumbnail {
            width: 100%;
            max-width: 300px;
            border-radius: 5px;
            margin-bottom: 10px;
        }
        
        .preview-info {
            font-size: 12px;
            color: #666;
            line-height: 1.4;
        }
        
        .stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            font-size: 14px;
            color: #666;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }
        
        .channel-link {
            color: #2196F3;
            text-decoration: none;
        }
        
        .channel-link:hover {
            text-decoration: underline;
        }
        
        .video-link {
            color: #FF5722;
            text-decoration: none;
        }
        
        .video-link:hover {
            text-decoration: underline;
        }
        
        .command-log {
            background: #2d2d2d;
            color: #00ff00;
            padding: 15px;
            border-radius: 5px;
            height: 200px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            line-height: 1.4;
            margin-top: 20px;
        }
        
        .log-input {
            width: 100%;
            background: #1e1e1e;
            color: #00ff00;
            border: 1px solid #555;
            padding: 8px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            margin-top: 10px;
        }
        
        .bottom-panel {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-top: 20px;
        }
        
        .working-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            background: #f44336;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .working-indicator.active {
            background: #4CAF50;
            animation: pulse 1s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        /* ëª¨ë‹¬ë“¤ */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }
        
        .modal-content {
            position: relative;
            background-color: white;
            margin: 5% auto;
            padding: 30px;
            border-radius: 10px;
            width: 80%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            border-bottom: 2px solid #eee;
            padding-bottom: 15px;
        }
        
        .close-btn {
            background: #f44336;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        
        .settings-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .settings-group {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 8px;
        }
        
        .settings-group h4 {
            margin-bottom: 15px;
            color: #333;
            border-bottom: 1px solid #ddd;
            padding-bottom: 8px;
        }
        
        .setting-item {
            margin-bottom: 15px;
        }
        
        .setting-item label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #555;
        }
        
        .setting-item input,
        .setting-item select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .setting-item input[type="checkbox"] {
            width: auto;
            margin-right: 8px;
        }
        
        .modal-actions {
            display: flex;
            gap: 10px;
            justify-content: center;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }
        
        .modal-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.3s;
        }
        
        .modal-btn.save {
            background: #4CAF50;
            color: white;
        }
        
        .modal-btn.reset {
            background: #ff9800;
            color: white;
        }
        
        .modal-btn.cancel {
            background: #9e9e9e;
            color: white;
        }
        
        .modal-btn:hover {
            opacity: 0.8;
        }
        
        .current-settings {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>YouTube Hot Finder v2.5</h1>
        </div>
        
        <div class="top-panel">
            <h3>ê²€ìƒ‰ íƒ€ì… ì„ íƒ</h3>
            <div class="search-buttons">
                <button class="search-btn" data-type="channel">ì±„ë„í•¸ë“¤ëª…</button>
                <button class="search-btn" data-type="keyword">í‚¤ì›Œë“œì…ë ¥</button>
                <button class="search-btn" data-type="settings">ì„¤ì •</button>
                <button class="search-btn" data-type="results">ê²°ê³¼</button>
                <button class="search-btn" data-type="smart" style="background: #ff5722;">ğŸ”¥ ìŠ¤ë§ˆíŠ¸ê²€ìƒ‰</button>
            </div>
        </div>
        
        <div class="search-section">
            <h3>ê²€ìƒ‰ì–´ ì…ë ¥</h3>
            <div class="search-input-container">
                <input type="text" class="search-input" id="searchInput" placeholder="ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
                <button class="execute-btn" onclick="executeSearch()">ê²€ìƒ‰ ì‹¤í–‰</button>
            </div>
            <div class="stats">
                <span>ê²€ìƒ‰ ìƒíƒœ: <span id="searchStatus">ëŒ€ê¸°ì¤‘</span></span>
                <span>ê²€ìƒ‰ ìœ í˜•: <span id="searchType">-</span></span>
                <span>ì´ ê²°ê³¼: <span id="totalResults">0</span></span>
                <span>ì„ íƒë¨: <span id="selectedCount">0</span></span>
            </div>
        </div>
        
        <div class="control-section">
            <h3>ì‘ì—… ì œì–´</h3>
            <div class="control-buttons">
                <button class="control-btn start" onclick="startOperation()">ì‹œì‘í•˜ê¸°</button>
                <button class="control-btn stop" onclick="stopOperation()">ì •ì§€í•˜ê¸°</button>
                <button class="control-btn clear" onclick="clearResults()">ê²°ê³¼ì§€ìš°ê¸°</button>
                <button class="control-btn excel" onclick="exportToExcel()">ì—‘ì…€ë¡œì €ì¥</button>
                <button class="control-btn save" onclick="saveCurrentWork()">í˜„ì¬ì‘ì—…ì €ì¥</button>
                <button class="control-btn load" onclick="loadWork()">ì‘ì—… ë¶ˆëŸ¬ì˜¤ê¸°</button>
                <button class="control-btn license" onclick="manageLicense()">ë¼ì´ì„ ìŠ¤ê´€ë¦¬</button>
                <button class="control-btn exit" onclick="exitProgram()">ì¢…ë£Œ</button>
                <button class="control-btn" style="background: #9c27b0;" onclick="openClassification()">ğŸ·ï¸ ë¶„ë¥˜ê´€ë¦¬</button>
            </div>
            
            <div class="api-section">
                <div style="position: relative;">
                    <input type="password" class="api-input" placeholder="YouTube Data API v3 Key ì…ë ¥" id="apiKey" oninput="checkApiKeyStatus()" autocomplete="off" style="height: 40px; font-family: monospace;">
                    <div id="apiKeyStatus" style="position: absolute; top: 5px; right: 5px; padding: 4px 8px; border-radius: 4px; font-size: 11px; font-weight: bold;">
                        ğŸ”´ í‚¤ ì—†ìŒ
                    </div>
                    <div style="margin-top: 10px; display: flex; gap: 5px;">
                        <button onclick="testApiKey()" style="padding: 6px 12px; background: #2196F3; color: white; border: none; border-radius: 4px; font-size: 12px; cursor: pointer;">ğŸ” API í‚¤ í…ŒìŠ¤íŠ¸</button>
                        <button onclick="clearApiKey()" style="padding: 6px 12px; background: #f44336; color: white; border: none; border-radius: 4px; font-size: 12px; cursor: pointer;">ğŸ—‘ï¸ í‚¤ ì§€ìš°ê¸°</button>
                    </div>
                </div>
                <div class="stats-section">
                    <div>
                        <span class="working-indicator" id="workingIndicator"></span>
                        ì‘ì—… ìƒíƒœ: <span id="workStatus">ëŒ€ê¸°ì¤‘</span>
                    </div>
                    <div>
                        ì²˜ë¦¬ëœ í•­ëª©: <span id="processedItems">0</span> / 
                        ì „ì²´: <span id="totalItems">0</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="main-content">
            <div class="center-panel">
                <h3>ê²€ìƒ‰ ê²°ê³¼</h3>
                <div id="resultsContainer">
                    <div class="loading">ê²€ìƒ‰ ë²„íŠ¼ì„ ì„ íƒí•˜ê³  ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•œ í›„ ê²€ìƒ‰ ì‹¤í–‰ì„ í´ë¦­í•˜ì„¸ìš”.</div>
                </div>
            </div>
            
            <div class="right-panel">
                <div class="preview-area">
                    <div class="preview-title">ì˜ìƒ ë¯¸ë¦¬ë³´ê¸°</div>
                    <div id="previewContent">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE2OCIgdmlld0JveD0iMCAwIDMwMCAxNjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMTY4IiBmaWxsPSIjQ0NDQ0NDIi8+Cjx0ZXh0IHg9IjE1MCIgeT0iNzUiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZpbGw9IiM2NjY2NjYiIGZvbnQtc2l6ZT0iMTYiPu2ZlOyDgSDrjIDquLDqs6DsoLA8L3RleHQ+Cjx0ZXh0IHg9IjE1MCIgeT0iMTAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSIjNjY2NjY2IiBmb250LXNpemU9IjEyIj7shKDtg50g7ZWE7JqU7JeQ7ISc64usPC90ZXh0Pgo8L3N2Zz4K" 
                             alt="ë¯¸ë¦¬ë³´ê¸°" class="preview-thumbnail" onerror="handleImageError(this)">
                        <div class="preview-info">ì˜ìƒì„ ì„ íƒí•˜ë©´ ë¯¸ë¦¬ë³´ê¸°ê°€ í‘œì‹œë©ë‹ˆë‹¤.</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="bottom-panel">
            <h4>ëª…ë ¹ì–´ / ë¡œê·¸ ì°½</h4>
            <div class="command-log" id="commandLog">
[20:19:04] YouTube Hot Finder v2.5 ì‹œì‘ë¨
[20:19:04] ì•ˆì „í•œ ì´ë¯¸ì§€ ë¡œë”© ì‹œìŠ¤í…œ í™œì„±í™”ë¨
[20:19:04] ëª…ë ¹ì–´ ëŒ€ê¸° ì¤‘ - ê²€ìƒ‰ íƒ€ì…ì„ ì„ íƒí•˜ê³  ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”
[20:19:05] ì‚¬ìš© ê°€ëŠ¥í•œ ëª…ë ¹ì–´: search, keyword, smart, config, analyze, classify, help
[20:19:06] í˜„ì¬ ì„¤ì •: ìµœëŒ€ê²°ê³¼ 25ê°œ, ì •ë ¬ ê´€ë ¨ë„, ìµœì†Œì¡°íšŒìˆ˜ 1,000
[20:19:06] ğŸ”¥ ìŠ¤ë§ˆíŠ¸ ê²€ìƒ‰ ê¸°ëŠ¥ í™œì„±í™”ë¨
[20:19:06] ğŸ› ï¸ ì—ëŸ¬ í•¸ë“¤ë§ ì‹œìŠ¤í…œ í™œì„±í™”ë¨
[20:19:06] ì‹œìŠ¤í…œ ì¤€ë¹„ ì™„ë£Œ - í…ŒìŠ¤íŠ¸ìš© ë”ë¯¸ ë°ì´í„° ë¡œë“œë¨
            </div>
            <input type="text" class="log-input" placeholder="ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: search @channel, keyword íŠ¸ë Œë“œ, config maxResults=50)" id="commandInput" onkeypress="handleCommand(event)">
        </div>
        
        <!-- ì„¤ì • ëª¨ë‹¬ -->
        <div id="settingsModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>ğŸ”§ ê²€ìƒ‰ ì¡°ê±´ ì„¤ì •</h2>
                    <button class="close-btn" onclick="closeSettings()">âœ• ë‹«ê¸°</button>
                </div>
                
                <div class="current-settings">
                    <strong>í˜„ì¬ ì ìš©ëœ ì„¤ì •:</strong> 
                    <span id="currentSettingsDisplay">ê¸°ë³¸ ì„¤ì • ì‚¬ìš© ì¤‘</span>
                </div>
                
                <div class="settings-grid">
                    <div class="settings-group">
                        <h4>ğŸ“Š ê²€ìƒ‰ ê²°ê³¼ ì„¤ì •</h4>
                        <div class="setting-item">
                            <label>ìµœëŒ€ ê²€ìƒ‰ ê²°ê³¼ ìˆ˜</label>
                            <select id="maxResults">
                                <option value="10">10ê°œ</option>
                                <option value="25" selected>25ê°œ</option>
                                <option value="50">50ê°œ</option>
                                <option value="100">100ê°œ</option>
                            </select>
                        </div>
                        <div class="setting-item">
                            <label>ì •ë ¬ ê¸°ì¤€</label>
                            <select id="sortBy">
                                <option value="relevance" selected>ê´€ë ¨ë„</option>
                                <option value="date">ì—…ë¡œë“œì¼</option>
                                <option value="viewCount">ì¡°íšŒìˆ˜</option>
                                <option value="rating">í‰ì </option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="settings-group">
                        <h4>ğŸ“… ì‹œê°„ í•„í„°</h4>
                        <div class="setting-item">
                            <label>ê²€ìƒ‰ ê¸°ê°„</label>
                            <select id="publishedAfter">
                                <option value="">ì „ì²´ ê¸°ê°„</option>
                                <option value="1">ìµœê·¼ 1ì¼</option>
                                <option value="7" selected>ìµœê·¼ 1ì£¼ì¼</option>
                                <option value="30">ìµœê·¼ 1ê°œì›”</option>
                                <option value="365">ìµœê·¼ 1ë…„</option>
                            </select>
                        </div>
                        <div class="setting-item">
                            <label>ì˜ìƒ ê¸¸ì´</label>
                            <select id="videoDuration">
                                <option value="">ëª¨ë“  ê¸¸ì´</option>
                                <option value="short">4ë¶„ ë¯¸ë§Œ</option>
                                <option value="medium" selected>4-20ë¶„</option>
                                <option value="long">20ë¶„ ì´ìƒ</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="modal-actions">
                    <button class="modal-btn save" onclick="saveSettings()">ğŸ’¾ ì €ì¥ ë° ì ìš©</button>
                    <button class="modal-btn reset" onclick="resetSettings()">ğŸ”„ ê¸°ë³¸ê°’ìœ¼ë¡œ ì¬ì„¤ì •</button>
                    <button class="modal-btn cancel" onclick="closeSettings()">âŒ ì·¨ì†Œ</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ì „ì—­ ë³€ìˆ˜ë“¤
        let currentSearchType = '';
        let searchResults = [];
        let selectedRow = null;
        let isWorking = false;
        let searchInterval = null;
        let analysisModal = null;
        let smartSearchModal = null;
        let dailyApiUsage = 0;
        const MAX_DAILY_QUOTA = 10000;
        
        let searchSettings = {
            maxResults: 25,
            sortBy: 'relevance',
            itemsPerPage: 25,
            publishedAfter: '7',
            videoDuration: 'medium',
            minViews: 1000,
            maxViews: null,
            minViewsPerHour: 100,
            regionCode: 'KR',
            relevanceLanguage: 'ko',
            hideShorts: false,
            hideLive: false,
            verifiedOnly: false,
            requestDelay: 1000,
            autoRefresh: 300,
            enableNotifications: true
        };

        // ë”ë¯¸ ë°ì´í„° - 50ê°œë¡œ í™•ì¥í•˜ì—¬ ë” ë‹¤ì–‘í•œ ê²€ìƒ‰ ê²°ê³¼ ì œê³µ
        const dummyData = [
            {
                channel: 'ì‹œë‹ˆì–´ë¼ì´í”„',
                title: '74ì„¸ ì‹œë‹ˆì–´ ë…ë¦½ ì´ì•¼ê¸° - ì‹œëŒê°ˆë“± ëì— ìƒˆì¶œë°œ',
                uploadDate: '2024-01-15',
                views: 1500000,
                viewsPerHour: 1250,
                subscribers: 500000,
                duration: '10:35',
                videoUrl: 'https://youtube.com/watch?v=example1',
                thumbnailUrl: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE2OCIgdmlld0JveD0iMCAwIDMwMCAxNjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMTY4IiBmaWxsPSIjRkY2QjZCIi8+Cjx0ZXh0IHg9IjE1MCIgeT0iOTAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZpbGw9IndoaXRlIiBmb250LXNpemU9IjE2Ij7si5znpqzslrQ8L3RleHQ+Cjwvc3ZnPgo=',
                source: 'Dummy'
            },
            {
                channel: 'ê°€ì¡±ì´ì•¼ê¸°ì±„ë„',
                title: 'ë…¸ì¸ ë©°ëŠë¦¬ê°ˆë“± 30ë…„ë§Œì— í•´ê²°í•œ ë°©ë²•',
                uploadDate: '2024-01-14',
                views: 890000,
                viewsPerHour: 980,
                subscribers: 250000,
                duration: '15:22',
                videoUrl: 'https://youtube.com/watch?v=example2',
                thumbnailUrl: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE2OCIgdmlld0JveD0iMCAwIDMwMCAxNjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMTY4IiBmaWxsPSIjNEVDREM0Ii8+Cjx0ZXh0IHg9IjE1MCIgeT0iOTAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZpbGw9IndoaXRlIiBmb250LXNpemU9IjE2Ij7qsIDsoLHqsJDrk7E8L3RleHQ+Cjwvc3ZnPgo=',
                source: 'Dummy'
            }
        ];

        // ë”ë¯¸ ë°ì´í„°ë¥¼ 50ê°œê¹Œì§€ ìë™ ìƒì„±
        const generateMoreDummyData = () => {
            const channels = ['ì‹œë‹ˆì–´TV', 'ë…¸í›„ë¼ì´í”„', '50í”ŒëŸ¬ìŠ¤', 'ì‹¤ë²„ì±„ë„', 'ì¤‘ë…„ì´ì•¼ê¸°', 'í™©í˜¼ë‚˜ì´', 'ì„¸ì»¨ë“œë¼ì´í”„', 'ê³¨ë“ ì—ì´ì§€', 'ì‹œë‹ˆì–´í´ëŸ½', 'ë…¸ë…„ê¸°'];
            const themes = ['ë…ë¦½', 'ê°ˆë“±', 'ìƒˆì¶œë°œ', 'ë„ì „', 'ì°½ì—…', 'íˆ¬ì', 'ê±´ê°•', 'ì—¬í–‰', 'ì·¨ë¯¸', 'ê´€ê³„', 'ì„±ê³µ', 'ê·¹ë³µ', 'ë³€í™”', 'ì„±ì¥', 'í–‰ë³µ'];
            
            while (dummyData.length < 50) {
                const randomChannel = channels[Math.floor(Math.random() * channels.length)];
                const randomTheme = themes[Math.floor(Math.random() * themes.length)];
                const randomViews = Math.floor(Math.random() * 3000000) + 100000;
                const randomViewsPerHour = Math.floor(Math.random() * 2000) + 500;
                const randomSubscribers = Math.floor(Math.random() * 1000000) + 50000;
                const randomDuration = `${Math.floor(Math.random() * 25) + 5}:${Math.floor(Math.random() * 60).toString().padStart(2, '0')}`;
                const randomDate = `2024-01-${Math.floor(Math.random() * 30) + 1}`;
                
                dummyData.push({
                    channel: randomChannel,
                    title: `${Math.floor(Math.random() * 20) + 60}ì„¸ ì‹œë‹ˆì–´ ${randomTheme} ì„±ê³µê¸° - ì‹¤ì œ ê²½í—˜ë‹´`,
                    uploadDate: randomDate,
                    views: randomViews,
                    viewsPerHour: randomViewsPerHour,
                    subscribers: randomSubscribers,
                    duration: randomDuration,
                    videoUrl: `https://youtube.com/watch?v=example${dummyData.length + 1}`,
                    thumbnailUrl: `data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE2OCIgdmlld0JveD0iMCAwIDMwMCAxNjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMTY4IiBmaWxsPSIjJHtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxNjc3NzIxNSkudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCkucGFkU3RhcnQoNiwgJzAnKX0iLz4KPHRleHQgeD0iMTUwIiB5PSI5MCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZmlsbD0id2hpdGUiIGZvbnQtc2l6ZT0iMTYiPiR7cmFuZG9tQ2hhbm5lbH08L3RleHQ+Cjwvc3ZnPgo=`,
                    source: 'Dummy'
                });
            }
        };
        
        generateMoreDummyData();

        // YouTube API ê´€ë ¨ í•¨ìˆ˜ë“¤
        async function searchWithYouTubeAPI(searchQuery, apiKey) {
            addLog('ğŸ”— ì‹¤ì œ YouTube APIë¡œ ê²€ìƒ‰ì„ ì‹œë„í•©ë‹ˆë‹¤...');
            
            try {
                // 1ë‹¨ê³„: ê²€ìƒ‰ API í˜¸ì¶œ
                const searchUrl = `https://www.googleapis.com/youtube/v3/search?part=snippet&q=${encodeURIComponent(searchQuery)}&key=${apiKey}&maxResults=${searchSettings.maxResults}&type=video&order=${searchSettings.sortBy}&regionCode=KR`;
                
                addLog(`ğŸ“¡ API ìš”ì²­: ${searchQuery}`);
                
                const searchResponse = await fetch(searchUrl);
                
                if (!searchResponse.ok) {
                    throw new Error(`ê²€ìƒ‰ API ì˜¤ë¥˜: ${searchResponse.status} - ${searchResponse.statusText}`);
                }
                
                const searchData = await searchResponse.json();
                addLog(`âœ… ê²€ìƒ‰ ì™„ë£Œ: ${searchData.items?.length || 0}ê°œ ê²°ê³¼`);
                
                if (!searchData.items || searchData.items.length === 0) {
                    addLog('âŒ ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.');
                    searchResults = [];
                    displayResults(searchResults);
                    document.getElementById('searchStatus').textContent = 'API ê²€ìƒ‰ì™„ë£Œ (0ê°œ)';
                    return;
                }
                
                // 2ë‹¨ê³„: ë¹„ë””ì˜¤ ìƒì„¸ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
                const videoIds = searchData.items.map(item => item.id.videoId).join(',');
                const videosUrl = `https://www.googleapis.com/youtube/v3/videos?part=snippet,statistics,contentDetails&id=${videoIds}&key=${apiKey}`;
                
                addLog('ğŸ“Š ì˜ìƒ ìƒì„¸ ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤...');
                
                const videosResponse = await fetch(videosUrl);
                
                if (!videosResponse.ok) {
                    throw new Error(`ë¹„ë””ì˜¤ API ì˜¤ë¥˜: ${videosResponse.status} - ${videosResponse.statusText}`);
                }
                
                const videosData = await videosResponse.json();
                
                // 3ë‹¨ê³„: ì±„ë„ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
                const channelIds = [...new Set(videosData.items.map(item => item.snippet.channelId))].join(',');
                const channelsUrl = `https://www.googleapis.com/youtube/v3/channels?part=statistics&id=${channelIds}&key=${apiKey}`;
                
                addLog('ğŸ­ ì±„ë„ ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤...');
                
                const channelsResponse = await fetch(channelsUrl);
                const channelsData = channelsResponse.ok ? await channelsResponse.json() : { items: [] };
                
                // 4ë‹¨ê³„: ë°ì´í„° ë³‘í•© ë° ì²˜ë¦¬
                const realResults = videosData.items.map(video => {
                    const searchItem = searchData.items.find(item => item.id.videoId === video.id);
                    const channelInfo = channelsData.items?.find(channel => channel.id === video.snippet.channelId);
                    
                    // ì¡°íšŒìˆ˜ ê³„ì‚°
                    const views = parseInt(video.statistics.viewCount || 0);
                    const publishedAt = new Date(video.snippet.publishedAt);
                    const hoursAgo = Math.max(1, (Date.now() - publishedAt.getTime()) / (1000 * 60 * 60));
                    const viewsPerHour = Math.round(views / hoursAgo);
                    
                    // ì˜ìƒ ê¸¸ì´ ë³€í™˜ (PT4M13S -> 4:13)
                    const duration = convertDuration(video.contentDetails.duration);
                    
                    return {
                        channel: video.snippet.channelTitle,
                        title: video.snippet.title,
                        uploadDate: video.snippet.publishedAt.split('T')[0],
                        views: views,
                        viewsPerHour: viewsPerHour,
                        subscribers: parseInt(channelInfo?.statistics.subscriberCount || 0),
                        duration: duration,
                        videoUrl: `https://youtube.com/watch?v=${video.id}`,
                        thumbnailUrl: video.snippet.thumbnails.medium?.url || video.snippet.thumbnails.default?.url,
                        source: 'YouTube API'
                    };
                });
                
                // í•„í„° ë° ì •ë ¬ ì ìš©
                let filteredResults = applySearchFilters(realResults);
                filteredResults = applySorting(filteredResults);
                
                searchResults = filteredResults;
                displayResults(searchResults);
                document.getElementById('searchStatus').textContent = `API ê²€ìƒ‰ì™„ë£Œ (${searchResults.length}ê°œ)`;
                document.getElementById('totalResults').textContent = searchResults.length;
                
                addLog(`ğŸ‰ ì‹¤ì œ YouTube API ê²€ìƒ‰ ì™„ë£Œ: ${searchResults.length}ê°œ ê²°ê³¼`);
                addLog(`ğŸ“ˆ API í• ë‹¹ëŸ‰ ì‚¬ìš©: ì•½ ${searchResults.length * 3}ê°œ ë‹¨ìœ„ (ê²€ìƒ‰+ë¹„ë””ì˜¤+ì±„ë„)`);
                
                // API í• ë‹¹ëŸ‰ ì—…ë°ì´íŠ¸
                updateApiQuota(searchResults.length * 3);
                
            } catch (error) {
                addLog(`âŒ YouTube API ì˜¤ë¥˜: ${error.message}`);
                
                if (error.message.includes('CORS') || error.message.includes('Failed to fetch')) {
                    addLog('ğŸ”’ CORS ì˜¤ë¥˜ ê°ì§€ - ì„œë²„ í”„ë¡ì‹œê°€ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
                    addLog('ğŸ”„ ë”ë¯¸ ë°ì´í„°ë¡œ ëŒ€ì²´í•˜ì—¬ ê¸°ëŠ¥ì„ ì‹œì—°í•©ë‹ˆë‹¤.');
                } else if (error.message.includes('403')) {
                    addLog('ğŸ”‘ API í‚¤ ë¬¸ì œ: í‚¤ê°€ ìœ íš¨í•˜ì§€ ì•Šê±°ë‚˜ í• ë‹¹ëŸ‰ì„ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤.');
                } else if (error.message.includes('400')) {
                    addLog('ğŸ“ ìš”ì²­ í˜•ì‹ ì˜¤ë¥˜: ê²€ìƒ‰ ë§¤ê°œë³€ìˆ˜ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.');
                }
                
                addLog('ğŸ“Š ë”ë¯¸ ë°ì´í„°ë¡œ ê¸°ëŠ¥ì„ ì‹œì—°í•©ë‹ˆë‹¤.');
                searchWithDummyData(searchQuery);
            }
        }

        // PT4M13S -> 4:13 ë³€í™˜ í•¨ìˆ˜
        function convertDuration(duration) {
            if (!duration) return '0:00';
            
            const match = duration.match(/PT(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?/);
            if (!match) return '0:00';
            
            const hours = parseInt(match[1] || 0);
            const minutes = parseInt(match[2] || 0);
            const seconds = parseInt(match[3] || 0);
            
            if (hours > 0) {
                return `${hours}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            } else {
                return `${minutes}:${seconds.toString().padStart(2, '0')}`;
            }
        }

        // API í• ë‹¹ëŸ‰ ì¶”ì 
        function checkApiQuota() {
            const today = new Date().toDateString();
            const lastUsageDate = localStorage.getItem('lastApiUsageDate');
            
            if (lastUsageDate !== today) {
                dailyApiUsage = 0;
                localStorage.setItem('lastApiUsageDate', today);
                localStorage.setItem('dailyApiUsage', '0');
            } else {
                dailyApiUsage = parseInt(localStorage.getItem('dailyApiUsage') || '0');
            }
            
            return dailyApiUsage;
        }

        function updateApiQuota(usedQuota) {
            dailyApiUsage += usedQuota;
            localStorage.setItem('dailyApiUsage', dailyApiUsage.toString());
            
            const remainingQuota = MAX_DAILY_QUOTA - dailyApiUsage;
            addLog(`ğŸ“Š API í• ë‹¹ëŸ‰: ${dailyApiUsage}/${MAX_DAILY_QUOTA} ì‚¬ìš© (${remainingQuota} ë‚¨ìŒ)`);
            
            if (remainingQuota < 300) {
                addLog('âš ï¸ API í• ë‹¹ëŸ‰ì´ ë¶€ì¡±í•©ë‹ˆë‹¤. ë‚´ì¼ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
            }
        }

        // ê²€ìƒ‰ ë²„íŠ¼ ì´ë²¤íŠ¸
        document.querySelectorAll('.search-btn').forEach(btn => {
            btn.addEventListener('click', function(e) {
                e.preventDefault();
                console.log('ê²€ìƒ‰ ë²„íŠ¼ í´ë¦­ë¨:', this.dataset.type);
                
                // ëª¨ë“  ë²„íŠ¼ì—ì„œ active í´ë˜ìŠ¤ ì œê±°
                document.querySelectorAll('.search-btn').forEach(b => b.classList.remove('active'));
                // í´ë¦­ëœ ë²„íŠ¼ì— active í´ë˜ìŠ¤ ì¶”ê°€
                this.classList.add('active');
                
                currentSearchType = this.dataset.type;
                document.getElementById('searchType').textContent = getSearchTypeText(currentSearchType);
                
                // ê²€ìƒ‰ì°½ í”Œë ˆì´ìŠ¤í™€ë” ë³€ê²½ ë° ìë™ ê¸°ëŠ¥ ì‹¤í–‰
                const input = document.getElementById('searchInput');
                switch(currentSearchType) {
                    case 'channel':
                        input.placeholder = 'ì±„ë„ í•¸ë“¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: @channelname)';
                        addLog('ì±„ë„í•¸ë“¤ëª… ê²€ìƒ‰ ëª¨ë“œë¡œ ì „í™˜ë˜ì—ˆìŠµë‹ˆë‹¤.');
                        break;
                    case 'keyword':
                        input.placeholder = 'ê²€ìƒ‰í•  í‚¤ì›Œë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”';
                        addLog('í‚¤ì›Œë“œ ê²€ìƒ‰ ëª¨ë“œë¡œ ì „í™˜ë˜ì—ˆìŠµë‹ˆë‹¤.');
                        break;
                    case 'settings':
                        input.placeholder = 'ì„¤ì • ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ë˜ëŠ” ì„¤ì • ì°½ ìë™ ì—´ë¦¼)';
                        addLog('ğŸ”§ ì„¤ì • ëª¨ë“œë¡œ ì „í™˜ë¨ - ì„¤ì • ì°½ì„ ì—½ë‹ˆë‹¤.');
                        setTimeout(() => openSettings(), 100);
                        break;
                    case 'smart':
                        input.placeholder = 'ìŠ¤ë§ˆíŠ¸ ê²€ìƒ‰ ì¡°ê±´ì„ ì„¤ì •í•˜ì„¸ìš” (ë˜ëŠ” ìŠ¤ë§ˆíŠ¸ ê²€ìƒ‰ ì°½ ìë™ ì—´ë¦¼)';
                        addLog('ğŸ”¥ ìŠ¤ë§ˆíŠ¸ ê²€ìƒ‰ ëª¨ë“œë¡œ ì „í™˜ë¨ - ìŠ¤ë§ˆíŠ¸ ê²€ìƒ‰ ì°½ì„ ì—½ë‹ˆë‹¤.');
                        setTimeout(() => openSmartSearch(), 100);
                        break;
                    case 'results':
                        input.placeholder = 'ê²°ê³¼ í•„í„° ì¡°ê±´ì„ ì…ë ¥í•˜ì„¸ìš” (ë˜ëŠ” ê²°ê³¼ ë¶„ì„ ìë™ ì—´ë¦¼)';
                        addLog('ğŸ“Š ê²°ê³¼ ë¶„ì„ ëª¨ë“œë¡œ ì „í™˜ë¨ - ë¶„ì„ ì°½ì„ ì—½ë‹ˆë‹¤.');
                        setTimeout(() => openAnalysis(), 100);
                        break;
                }
            });
        });

        function getSearchTypeText(type) {
            switch(type) {
                case 'channel': return 'ì±„ë„í•¸ë“¤ëª…';
                case 'keyword': return 'í‚¤ì›Œë“œì…ë ¥';
                case 'settings': return 'ì„¤ì •';
                case 'results': return 'ê²°ê³¼';
                case 'smart': return 'ìŠ¤ë§ˆíŠ¸ê²€ìƒ‰';
                default: return '-';
            }
        }

        function executeSearch() {
            if (!currentSearchType) {
                alert('ê²€ìƒ‰ íƒ€ì…ì„ ë¨¼ì € ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }

            const searchQuery = document.getElementById('searchInput').value.trim();
            if (!searchQuery) {
                alert('ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            const apiKey = document.getElementById('apiKey').value.trim();
            
            document.getElementById('searchStatus').textContent = 'ê²€ìƒ‰ì¤‘...';
            addLog(`ê²€ìƒ‰ ì‹œì‘: "${searchQuery}" (íƒ€ì…: ${getSearchTypeText(currentSearchType)})`);
            
            // API í‚¤ ê²€ì¦ ë° ì‹¤ì œ API í˜¸ì¶œ ì‹œë„
            if (apiKey && apiKey.startsWith('AIza') && apiKey.length > 30) {
                addLog('YouTube API í‚¤ê°€ ì…ë ¥ë˜ì–´ ìˆì–´ ì‹¤ì œ APIë¡œ ê²€ìƒ‰ì„ ì‹œë„í•©ë‹ˆë‹¤...');
                searchWithYouTubeAPI(searchQuery, apiKey);
            } else {
                if (apiKey && !apiKey.startsWith('AIza')) {
                    addLog('âš ï¸ ì˜¬ë°”ë¥´ì§€ ì•Šì€ API í‚¤ í˜•ì‹ì…ë‹ˆë‹¤. ë”ë¯¸ ë°ì´í„°ë¡œ ê²€ìƒ‰í•©ë‹ˆë‹¤.');
                } else {
                    addLog('API í‚¤ê°€ ì—†ì–´ ë”ë¯¸ ë°ì´í„°ë¡œ ê²€ìƒ‰í•©ë‹ˆë‹¤.');
                }
                searchWithDummyData(searchQuery);
            }
        }

        function searchWithDummyData(query) {
            setTimeout(() => {
                console.log('ë”ë¯¸ ë°ì´í„° ê²€ìƒ‰ ì‹œì‘:', query);
                addLog(`ë”ë¯¸ ë°ì´í„°ë¡œ ê²€ìƒ‰: "${query}"`);
                
                let filteredResults = filterByKeywords(dummyData, query);
                
                console.log('í•„í„°ë§ ì „ ë°ì´í„° ìˆ˜:', dummyData.length);
                console.log('í•„í„°ë§ í›„ ë°ì´í„° ìˆ˜:', filteredResults.length);
                
                // ì„¤ì • ê¸°ë°˜ í•„í„° ì ìš©
                filteredResults = applySearchFilters(filteredResults);
                
                // ì •ë ¬ ì ìš©
                filteredResults = applySorting(filteredResults);
                
                // ìµœëŒ€ ê²°ê³¼ ìˆ˜ ì œí•œ
                filteredResults = filteredResults.slice(0, searchSettings.maxResults);
                
                searchResults = filteredResults;
                displayResults(searchResults);
                document.getElementById('searchStatus').textContent = `ë”ë¯¸ ê²€ìƒ‰ì™„ë£Œ (${filteredResults.length}ê°œ)`;
                document.getElementById('totalResults').textContent = searchResults.length;
                
                addLog(`ë”ë¯¸ ë°ì´í„° ê²€ìƒ‰ ì™„ë£Œ: ${searchResults.length}ê°œ ê²°ê³¼`);
                if (filteredResults.length === 0) {
                    addLog('âŒ ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤. ë‹¤ë¥¸ í‚¤ì›Œë“œë¥¼ ì‹œë„í•´ë³´ì„¸ìš”.');
                }
            }, 1000);
        }

        function filterByKeywords(data, query) {
            if (!query || query.trim() === '') {
                return data;
            }
            
            const keywords = query.toLowerCase()
                .split(/[,\s]+/)
                .map(k => k.trim())
                .filter(k => k.length > 0);
                
            console.log('ê²€ìƒ‰ í‚¤ì›Œë“œë“¤:', keywords);
            
            return data.filter(item => {
                const title = item.title.toLowerCase();
                const channel = item.channel.toLowerCase();
                
                return keywords.some(keyword => 
                    title.includes(keyword) || channel.includes(keyword)
                );
            });
        }

        function displayResults(results) {
            const container = document.getElementById('resultsContainer');
            
            if (results.length === 0) {
                container.innerHTML = '<div class="loading">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</div>';
                return;
            }

            const table = `
                <table class="results-table">
                    <thead>
                        <tr>
                            <th>ì±„ë„ëª…</th>
                            <th>ì œëª©</th>
                            <th>ì—…ë¡œë“œì¼</th>
                            <th>ì¡°íšŒìˆ˜</th>
                            <th>ì‹œê°„ë‹¹ ì¡°íšŒìˆ˜</th>
                            <th>êµ¬ë…ììˆ˜</th>
                            <th>ì˜ìƒê¸¸ì´</th>
                            <th>ì˜ìƒë§í¬</th>
                            <th>ì¸ë„¤ì¼ë§í¬</th>
                            <th>ì¶œì²˜</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${results.map((item, index) => `
                            <tr onclick="selectRow(${index})" data-index="${index}" style="cursor: pointer;">
                                <td><span class="channel-link">${item.channel}</span></td>
                                <td title="${escapeHtml(item.title)}">${item.title.length > 50 ? item.title.substring(0, 50) + '...' : item.title}</td>
                                <td>${item.uploadDate}</td>
                                <td>${item.views.toLocaleString()}</td>
                                <td>${item.viewsPerHour.toLocaleString()}</td>
                                <td>${item.subscribers.toLocaleString()}</td>
                                <td>${item.duration}</td>
                                <td><button onclick="openVideoLink('${item.videoUrl}', event)" class="video-link" style="background: #FF5722; color: white; border: none; padding: 4px 8px; border-radius: 3px; cursor: pointer; font-size: 11px;">ğŸ¬ ì˜ìƒë³´ê¸°</button></td>
                                <td><button onclick="openThumbnailLink('${item.thumbnailUrl}', event)" class="video-link" style="background: #2196F3; color: white; border: none; padding: 4px 8px; border-radius: 3px; cursor: pointer; font-size: 11px;">ğŸ–¼ï¸ ì¸ë„¤ì¼</button></td>
                                <td><span style="padding: 2px 6px; background: ${item.source === 'YouTube API' ? '#4CAF50' : '#FF9800'}; color: white; border-radius: 3px; font-size: 10px;">${item.source}</span></td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
            `;
            
            container.innerHTML = table;
            addLog(`ğŸ“‹ ê²€ìƒ‰ ê²°ê³¼ í…Œì´ë¸”ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤. (${results.length}ê°œ í•­ëª©)`);
        }

        function openVideoLink(url, event) {
            event.stopPropagation(); // í–‰ ì„ íƒ ì´ë²¤íŠ¸ ë°©ì§€
            if (url.includes('example')) {
                alert('ğŸ¬ ë°ëª¨ ì˜ìƒ ë§í¬ì…ë‹ˆë‹¤.\nì‹¤ì œ YouTube APIë¥¼ ì‚¬ìš©í•˜ë©´ ì§„ì§œ ì˜ìƒ ë§í¬ê°€ ì œê³µë©ë‹ˆë‹¤.');
                addLog('ğŸ¬ ë°ëª¨ ì˜ìƒ ë§í¬ í´ë¦­ë¨');
            } else {
                window.open(url, '_blank');
                addLog('ğŸ¬ ì˜ìƒ ë§í¬ ì—´ë¦¼: ' + url);
            }
        }

        function openThumbnailLink(url, event) {
            event.stopPropagation(); // í–‰ ì„ íƒ ì´ë²¤íŠ¸ ë°©ì§€
            if (url.startsWith('data:image/svg+xml')) {
                addLog('ğŸ–¼ï¸ SVG ì¸ë„¤ì¼ì…ë‹ˆë‹¤ (ë°ëª¨ìš©)');
                alert('ğŸ–¼ï¸ ë°ëª¨ìš© SVG ì¸ë„¤ì¼ì…ë‹ˆë‹¤.\nì‹¤ì œ YouTube APIë¥¼ ì‚¬ìš©í•˜ë©´ ì§„ì§œ ì¸ë„¤ì¼ ì´ë¯¸ì§€ê°€ ì œê³µë©ë‹ˆë‹¤.');
            } else {
                window.open(url, '_blank');
                addLog('ğŸ–¼ï¸ ì¸ë„¤ì¼ ë§í¬ ì—´ë¦¼: ' + url);
            }
        }

        function selectRow(index) {
            try {
                console.log('í–‰ ì„ íƒ ì‹œë„:', index, 'ì „ì²´ ê²°ê³¼ ìˆ˜:', searchResults.length);
                
                if (!searchResults || searchResults.length === 0) {
                    console.error('ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤');
                    addLog('âŒ ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ì–´ ì„ íƒí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                    return;
                }
                
                if (index < 0 || index >= searchResults.length) {
                    console.error('ì˜ëª»ëœ ì¸ë±ìŠ¤:', index);
                    addLog(`âŒ ì˜ëª»ëœ ì„ íƒì…ë‹ˆë‹¤. (ì¸ë±ìŠ¤: ${index})`);
                    return;
                }
                
                // ì´ì „ ì„ íƒ ì œê±°
                if (selectedRow !== null) {
                    const prevSelected = document.querySelector(`tr[data-index="${selectedRow}"]`);
                    if (prevSelected) {
                        prevSelected.classList.remove('selected');
                        prevSelected.style.backgroundColor = '';
                    }
                }
                
                // ìƒˆë¡œìš´ ì„ íƒ ì ìš©
                selectedRow = index;
                const newSelected = document.querySelector(`tr[data-index="${index}"]`);
                if (newSelected) {
                    newSelected.classList.add('selected');
                    newSelected.style.backgroundColor = '#e3f2fd';
                    console.log('í–‰ ì„ íƒ ì„±ê³µ');
                } else {
                    console.error('ì„ íƒí•  í–‰ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤:', index);
                }
                
                document.getElementById('selectedCount').textContent = '1';
                
                // ë¯¸ë¦¬ë³´ê¸° ì—…ë°ì´íŠ¸
                const selectedVideo = searchResults[index];
                if (selectedVideo) {
                    updatePreview(selectedVideo);
                    addLog(`âœ… ì˜ìƒ ì„ íƒë¨: ${selectedVideo.title.substring(0, 30)}...`);
                } else {
                    console.error('ì„ íƒëœ ì˜ìƒ ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
                    addLog('âŒ ì„ íƒëœ ì˜ìƒ ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                }
                
            } catch (error) {
                console.error('í–‰ ì„ íƒ ì¤‘ ì˜¤ë¥˜:', error);
                addLog(`âŒ ì˜ìƒ ì„ íƒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ${error.message}`);
            }
        }

        function updatePreview(video) {
            const previewContent = document.getElementById('previewContent');
            if (!previewContent || !video) {
                console.error('ë¯¸ë¦¬ë³´ê¸° ì—…ë°ì´íŠ¸ ì‹¤íŒ¨: ìš”ì†Œ ë˜ëŠ” ë¹„ë””ì˜¤ ë°ì´í„° ì—†ìŒ');
                return;
            }
            
            console.log('ë¯¸ë¦¬ë³´ê¸° ì—…ë°ì´íŠ¸ ì‹œì‘:', video.title);
            
            const defaultImageUrl = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE2OCIgdmlld0JveD0iMCAwIDMwMCAxNjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMTY4IiBmaWxsPSIjNDU4NEZGIi8+Cjx0ZXh0IHg9IjE1MCIgeT0iNzUiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZpbGw9IndoaXRlIiBmb250LXNpemU9IjE0Ij7rupnquIw8L3RleHQ+Cjx0ZXh0IHg9IjE1MCIgeT0iOTUiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZpbGw9IndoaXRlIiBmb250LXNpemU9IjE0Ij7rpbzrlKk8L3RleHQ+Cjx0ZXh0IHg9IjE1MCIgeT0iMTE1IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSJ3aGl0ZSIgZm9udC1zaXplPSIxNCI+7ZWZ7JqU7JW8IOyEoO2DnTwvdGV4dD4KPC9zdmc+Cg==';
            
            const thumbnailUrl = video.thumbnailUrl || defaultImageUrl;
            
            previewContent.innerHTML = `
                <img src="${thumbnailUrl}" 
                     alt="${escapeHtml(video.title)}" 
                     class="preview-thumbnail"
                     onerror="this.src='${defaultImageUrl}'; console.log('ì¸ë„¤ì¼ ë¡œë”© ì‹¤íŒ¨, ê¸°ë³¸ ì´ë¯¸ì§€ë¡œ ëŒ€ì²´');"
                     onload="console.log('ì¸ë„¤ì¼ ë¡œë”© ì„±ê³µ');"
                     style="max-width: 100%; height: auto; border-radius: 8px; margin-bottom: 15px;">
                <div class="preview-info" style="text-align: left; line-height: 1.6;">
                    <div style="font-size: 16px; font-weight: bold; margin-bottom: 12px; color: #333;">
                        ${escapeHtml(video.title)}
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; font-size: 13px; color: #666;">
                        <div><strong>ğŸ“º ì±„ë„:</strong> ${escapeHtml(video.channel)}</div>
                        <div><strong>ğŸ‘ï¸ ì¡°íšŒìˆ˜:</strong> ${video.views.toLocaleString()}</div>
                        <div><strong>ğŸ“… ì—…ë¡œë“œ:</strong> ${video.uploadDate}</div>
                        <div><strong>â±ï¸ ê¸¸ì´:</strong> ${video.duration}</div>
                        <div><strong>âš¡ ì‹œê°„ë‹¹ ì¡°íšŒ:</strong> ${video.viewsPerHour.toLocaleString()}</div>
                        <div><strong>ğŸ‘¥ êµ¬ë…ì:</strong> ${video.subscribers.toLocaleString()}</div>
                    </div>
                    <div style="margin-top: 15px; display: flex; gap: 8px;">
                        <button onclick="openVideoLink('${video.videoUrl}', event)" 
                                style="padding: 8px 12px; background: #FF5722; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 12px;">
                            ğŸ¬ ì˜ìƒ ë³´ê¸°
                        </button>
                        <button onclick="openThumbnailLink('${video.thumbnailUrl}', event)" 
                                style="padding: 8px 12px; background: #2196F3; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 12px;">
                            ğŸ–¼ï¸ ì¸ë„¤ì¼
                        </button>
                    </div>
                </div>
            `;
            
            addLog(`ğŸ¬ ë¯¸ë¦¬ë³´ê¸° ì—…ë°ì´íŠ¸ ì™„ë£Œ: ${video.title.substring(0, 30)}...`);
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function handleImageError(img) {
            console.log('ì´ë¯¸ì§€ ë¡œë”© ì—ëŸ¬ ì²˜ë¦¬');
            const defaultImage = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE2OCIgdmlld0JveD0iMCAwIDMwMCAxNjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMTY4IiBmaWxsPSIjRjU0NTQ1Ii8+Cjx0ZXh0IHg9IjE1MCIgeT0iOTAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZpbGw9IndoaXRlIiBmb250LXNpemU9IjE2Ij7snbTrr7jsp4Ag642U7Iik7Iuk7Pek7JeG7J2MPC90ZXh0Pgo8L3N2Zz4K';
            if (img.src !== defaultImage) {
                img.src = defaultImage;
                addLog('âŒ ì´ë¯¸ì§€ ë¡œë”© ì‹¤íŒ¨ë¡œ ê¸°ë³¸ ì´ë¯¸ì§€ë¡œ ëŒ€ì²´í–ˆìŠµë‹ˆë‹¤.');
            }
        }

        // API í‚¤ ìƒíƒœ í™•ì¸ í•¨ìˆ˜
        function checkApiKeyStatus() {
            const apiKey = document.getElementById('apiKey').value.trim();
            const statusElement = document.getElementById('apiKeyStatus');
            
            if (!apiKey) {
                statusElement.textContent = 'ğŸ”´ í‚¤ ì—†ìŒ';
                statusElement.style.background = '#ffebee';
                statusElement.style.color = '#c62828';
                addLog('ğŸ“ API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
            } else if (apiKey.startsWith('AIza') && apiKey.length > 30) {
                statusElement.textContent = 'ğŸŸ¢ ìœ íš¨í•œ í˜•ì‹';
                statusElement.style.background = '#e8f5e8';
                statusElement.style.color = '#2e7d32';
                addLog('âœ… ìœ íš¨í•œ API í‚¤ í˜•ì‹ì´ ì…ë ¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
            } else {
                statusElement.textContent = 'ğŸŸ¡ í˜•ì‹ í™•ì¸ í•„ìš”';
                statusElement.style.background = '#fff3e0';
                statusElement.style.color = '#ef6c00';
                addLog('âš ï¸ API í‚¤ í˜•ì‹ì„ í™•ì¸í•´ì£¼ì„¸ìš”. (AIzaë¡œ ì‹œì‘í•´ì•¼ í•¨)');
            }
        }

        function testApiKey() {
            const apiKey = document.getElementById('apiKey').value.trim();
            if (!apiKey) {
                alert('âŒ API í‚¤ë¥¼ ë¨¼ì € ì…ë ¥í•´ì£¼ì„¸ìš”.');
                addLog('âŒ API í‚¤ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•ŠìŒ');
                return;
            }
            
            if (apiKey.startsWith('AIza') && apiKey.length > 30) {
                addLog('ğŸ” API í‚¤ í…ŒìŠ¤íŠ¸ ì¤‘...');
                setTimeout(() => {
                    alert('âœ… API í‚¤ í˜•ì‹ì´ ì˜¬ë°”ë¦…ë‹ˆë‹¤!\nì‹¤ì œ YouTube API ì—°ë™ì€ ì„œë²„ í™˜ê²½ì—ì„œ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•©ë‹ˆë‹¤.');
                    addLog('âœ… API í‚¤ í…ŒìŠ¤íŠ¸ ì™„ë£Œ - í˜•ì‹ ê²€ì¦ ì„±ê³µ');
                }, 1000);
            } else {
                alert('âŒ ì˜¬ë°”ë¥´ì§€ ì•Šì€ API í‚¤ í˜•ì‹ì…ë‹ˆë‹¤.\nYouTube Data API v3 í‚¤ëŠ” "AIza"ë¡œ ì‹œì‘í•´ì•¼ í•©ë‹ˆë‹¤.');
                addLog('âŒ API í‚¤ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ì˜ëª»ëœ í˜•ì‹');
            }
        }

        function clearApiKey() {
            document.getElementById('apiKey').value = '';
            checkApiKeyStatus();
            addLog('ğŸ—‘ï¸ API í‚¤ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
        }

        // ì„¤ì • ê´€ë ¨ í•¨ìˆ˜ë“¤
        function openSettings() {
            addLog('ğŸ”§ ì„¤ì • ì°½ì„ ì—½ë‹ˆë‹¤.');
            document.getElementById('settingsModal').style.display = 'block';
            updateCurrentSettingsDisplay();
        }

        function closeSettings() {
            addLog('âŒ ì„¤ì • ì°½ì„ ë‹«ìŠµë‹ˆë‹¤.');
            document.getElementById('settingsModal').style.display = 'none';
        }

        function saveSettings() {
            // ì„¤ì •ê°’ ì½ê¸°
            searchSettings.maxResults = parseInt(document.getElementById('maxResults').value);
            searchSettings.sortBy = document.getElementById('sortBy').value;
            searchSettings.publishedAfter = document.getElementById('publishedAfter').value;
            searchSettings.videoDuration = document.getElementById('videoDuration').value;
            
            addLog('ğŸ’¾ ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
            addLog(`ğŸ“Š ìµœëŒ€ ê²°ê³¼: ${searchSettings.maxResults}ê°œ`);
            addLog(`ğŸ”„ ì •ë ¬: ${searchSettings.sortBy}`);
            addLog(`ğŸ“… ê¸°ê°„: ${searchSettings.publishedAfter || 'ì „ì²´'}ì¼`);
            addLog(`â±ï¸ ê¸¸ì´: ${searchSettings.videoDuration || 'ì „ì²´'}`);
            
            closeSettings();
            updateCurrentSettingsDisplay();
        }

        function resetSettings() {
            // ê¸°ë³¸ê°’ìœ¼ë¡œ ì¬ì„¤ì •
            document.getElementById('maxResults').value = '25';
            document.getElementById('sortBy').value = 'relevance';
            document.getElementById('publishedAfter').value = '7';
            document.getElementById('videoDuration').value = 'medium';
            
            addLog('ğŸ”„ ì„¤ì •ì´ ê¸°ë³¸ê°’ìœ¼ë¡œ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.');
        }

        function updateCurrentSettingsDisplay() {
            const settingsText = `ìµœëŒ€ê²°ê³¼: ${searchSettings.maxResults}ê°œ, ì •ë ¬: ${searchSettings.sortBy}, ê¸°ê°„: ${searchSettings.publishedAfter || 'ì „ì²´'}ì¼, ê¸¸ì´: ${searchSettings.videoDuration || 'ì „ì²´'}`;
            const display = document.getElementById('currentSettingsDisplay');
            if (display) {
                display.textContent = settingsText;
            }
        }

        // ê²°ê³¼ ë¶„ì„ ëª¨ë‹¬ ê¸°ëŠ¥ë“¤
        function openAnalysis() {
            addLog('ğŸ“Š ê²°ê³¼ ë¶„ì„ ì°½ì„ ì—½ë‹ˆë‹¤.');
            if (!analysisModal) {
                createAnalysisModal();
            }
            analysisModal.style.display = 'block';
            updateAnalysisData();
        }

        function closeAnalysis() {
            addLog('âŒ ê²°ê³¼ ë¶„ì„ ì°½ì„ ë‹«ìŠµë‹ˆë‹¤.');
            if (analysisModal) {
                analysisModal.style.display = 'none';
            }
        }

        // ìŠ¤ë§ˆíŠ¸ ê²€ìƒ‰ ëª¨ë‹¬ ê¸°ëŠ¥ë“¤
        function openSmartSearch() {
            addLog('ğŸ”¥ ìŠ¤ë§ˆíŠ¸ ê²€ìƒ‰ ì°½ì„ ì—½ë‹ˆë‹¤.');
            if (!smartSearchModal) {
                createSmartSearchModal();
            }
            smartSearchModal.style.display = 'block';
        }

        function closeSmartSearch() {
            addLog('âŒ ìŠ¤ë§ˆíŠ¸ ê²€ìƒ‰ ì°½ì„ ë‹«ìŠµë‹ˆë‹¤.');
            if (smartSearchModal) {
                smartSearchModal.style.display = 'none';
            }
        }

        // ëª¨ë‹¬ ìƒì„± í•¨ìˆ˜ë“¤
        function createAnalysisModal() {
            analysisModal = document.createElement('div');
            analysisModal.className = 'modal';
            
            analysisModal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>ğŸ“Š ê²€ìƒ‰ ê²°ê³¼ ë¶„ì„</h2>
                        <button class="close-btn" onclick="closeAnalysis()">âœ• ë‹«ê¸°</button>
                    </div>
                    <div id="analysisContent">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                            <div style="background: #f9f9f9; padding: 20px; border-radius: 8px;">
                                <h4>ğŸ“ˆ í†µê³„ ì •ë³´</h4>
                                <div id="statsInfo">ë¶„ì„ ì¤‘...</div>
                            </div>
                            <div style="background: #f9f9f9; padding: 20px; border-radius: 8px;">
                                <h4>ğŸ¯ ì¸ê¸° í‚¤ì›Œë“œ</h4>
                                <div id="keywordInfo">ë¶„ì„ ì¤‘...</div>
                            </div>
                        </div>
                        <div style="background: #f9f9f9; padding: 20px; border-radius: 8px;">
                            <h4>ğŸ’¡ ì¶”ì²œ ì‚¬í•­</h4>
                            <div id="recommendationInfo">ë¶„ì„ ì¤‘...</div>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(analysisModal);
        }

        function createSmartSearchModal() {
            smartSearchModal = document.createElement('div');
            smartSearchModal.className = 'modal';
            
            smartSearchModal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>ğŸ”¥ ìŠ¤ë§ˆíŠ¸ ê²€ìƒ‰</h2>
                        <button class="close-btn" onclick="closeSmartSearch()">âœ• ë‹«ê¸°</button>
                    </div>
                    <div id="smartSearchContent">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                            <div style="background: #f9f9f9; padding: 20px; border-radius: 8px;">
                                <h4>ğŸ¯ íƒ€ê²Ÿ ì„¤ì •</h4>
                                <label style="display: block; margin-bottom: 5px; font-weight: bold;">ì¡°íšŒìˆ˜ ë²”ìœ„</label>
                                <input type="number" placeholder="ìµœì†Œ ì¡°íšŒìˆ˜" style="width: 100%; padding: 8px; margin-bottom: 10px; border: 1px solid #ddd; border-radius: 4px;">
                                <input type="number" placeholder="ìµœëŒ€ ì¡°íšŒìˆ˜" style="width: 100%; padding: 8px; margin-bottom: 10px; border: 1px solid #ddd; border-radius: 4px;">
                                
                                <label style="display: block; margin-bottom: 5px; font-weight: bold;">ì‹œê°„ë‹¹ ì¡°íšŒìˆ˜</label>
                                <input type="number" placeholder="ìµœì†Œ ì‹œê°„ë‹¹ ì¡°íšŒìˆ˜" style="width: 100%; padding: 8px; margin-bottom: 10px; border: 1px solid #ddd; border-radius: 4px;">
                            </div>
                            <div style="background: #f9f9f9; padding: 20px; border-radius: 8px;">
                                <h4>ğŸ” ê³ ê¸‰ í•„í„°</h4>
                                <label style="display: block; margin-bottom: 5px; font-weight: bold;">ì±„ë„ ì¡°ê±´</label>
                                <select style="width: 100%; padding: 8px; margin-bottom: 10px; border: 1px solid #ddd; border-radius: 4px;">
                                    <option value="">ì „ì²´</option>
                                    <option value="verified">ì¸ì¦ ì±„ë„ë§Œ</option>
                                    <option value="popular">ì¸ê¸° ì±„ë„ë§Œ</option>
                                </select>
                                
                                <label style="display: block; margin-bottom: 5px; font-weight: bold;">ì˜ìƒ íƒ€ì…</label>
                                <select style="width: 100%; padding: 8px; margin-bottom: 10px; border: 1px solid #ddd; border-radius: 4px;">
                                    <option value="">ì „ì²´</option>
                                    <option value="regular">ì¼ë°˜ ì˜ìƒ</option>
                                    <option value="shorts">ì‡¼ì¸  ì œì™¸</option>
                                    <option value="live">ë¼ì´ë¸Œ ì œì™¸</option>
                                </select>
                            </div>
                        </div>
                        <div class="modal-actions">
                            <button class="modal-btn save" onclick="executeSmartSearch()">ğŸš€ ìŠ¤ë§ˆíŠ¸ ê²€ìƒ‰ ì‹¤í–‰</button>
                            <button class="modal-btn reset" onclick="resetSmartSearch()">ğŸ”„ ì¡°ê±´ ì´ˆê¸°í™”</button>
                            <button class="modal-btn cancel" onclick="closeSmartSearch()">âŒ ì·¨ì†Œ</button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(smartSearchModal);
        }

        function updateAnalysisData() {
            if (!searchResults || searchResults.length === 0) {
                document.getElementById('statsInfo').innerHTML = 'âš ï¸ ë¶„ì„í•  ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.';
                document.getElementById('keywordInfo').innerHTML = 'âš ï¸ í‚¤ì›Œë“œ ë¶„ì„ ë¶ˆê°€';
                document.getElementById('recommendationInfo').innerHTML = 'âš ï¸ ë¨¼ì € ê²€ìƒ‰ì„ ì‹¤í–‰í•´ì£¼ì„¸ìš”.';
                return;
            }

            // í†µê³„ ì •ë³´
            const totalViews = searchResults.reduce((sum, item) => sum + item.views, 0);
            const avgViews = Math.round(totalViews / searchResults.length);
            const avgViewsPerHour = Math.round(searchResults.reduce((sum, item) => sum + item.viewsPerHour, 0) / searchResults.length);
            
            document.getElementById('statsInfo').innerHTML = `
                â€¢ ì´ ê²°ê³¼: ${searchResults.length}ê°œ<br>
                â€¢ í‰ê·  ì¡°íšŒìˆ˜: ${avgViews.toLocaleString()}<br>
                â€¢ í‰ê·  ì‹œê°„ë‹¹ ì¡°íšŒìˆ˜: ${avgViewsPerHour.toLocaleString()}<br>
                â€¢ ì´ ì¡°íšŒìˆ˜: ${totalViews.toLocaleString()}
            `;

            // í‚¤ì›Œë“œ ë¶„ì„
            const keywords = {};
            searchResults.forEach(item => {
                const words = item.title.split(/[\s,]+/);
                words.forEach(word => {
                    if (word.length > 1) {
                        keywords[word] = (keywords[word] || 0) + 1;
                    }
                });
            });
            
            const topKeywords = Object.entries(keywords)
                .sort(([,a], [,b]) => b - a)
                .slice(0, 5)
                .map(([word, count]) => `${word} (${count}íšŒ)`)
                .join('<br>â€¢ ');

            document.getElementById('keywordInfo').innerHTML = `â€¢ ${topKeywords}`;

            // ì¶”ì²œ ì‚¬í•­
            document.getElementById('recommendationInfo').innerHTML = `
                ğŸ¯ ê°€ì¥ ì¸ê¸°ìˆëŠ” ì±„ë„: ${searchResults[0]?.channel}<br>
                ğŸ“ˆ ì¡°íšŒìˆ˜ ìƒìœ„ ì˜ìƒì˜ í‰ê·  ê¸¸ì´: ${searchResults.slice(0, 3).map(v => v.duration).join(', ')}<br>
                ğŸ’¡ ì¶”ì²œ í‚¤ì›Œë“œ: ${Object.keys(keywords).slice(0, 3).join(', ')}<br>
                â° ì—…ë¡œë“œ íŒ¨í„´: ìµœê·¼ ì˜ìƒë“¤ì´ ë†’ì€ ì„±ê³¼ë¥¼ ë³´ì„
            `;
        }

        function executeSmartSearch() {
            addLog('ğŸš€ ìŠ¤ë§ˆíŠ¸ ê²€ìƒ‰ì„ ì‹¤í–‰í•©ë‹ˆë‹¤...');
            closeSmartSearch();
            // í˜„ì¬ ê²€ìƒ‰ ì‹¤í–‰ (ì‹¤ì œë¡œëŠ” ê³ ê¸‰ ì¡°ê±´ì„ ì ìš©í•´ì•¼ í•¨)
            executeSearch();
        }

        function resetSmartSearch() {
            addLog('ğŸ”„ ìŠ¤ë§ˆíŠ¸ ê²€ìƒ‰ ì¡°ê±´ì„ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.');
        }

        // ê¸°íƒ€ ë²„íŠ¼ ê¸°ëŠ¥ë“¤ - ì™„ì „ êµ¬í˜„
        function startOperation() {
            if (isWorking) {
                addLog('âš ï¸ ì´ë¯¸ ì‘ì—…ì´ ì§„í–‰ ì¤‘ì…ë‹ˆë‹¤.');
                return;
            }
            
            isWorking = true;
            document.getElementById('workingIndicator').classList.add('active');
            document.getElementById('workStatus').textContent = 'ì‘ì—…ì¤‘';
            
            addLog('ğŸš€ ì‘ì—…ì„ ì‹œì‘í•©ë‹ˆë‹¤...');
            addLog('ğŸ“Š í˜„ì¬ ì„¤ì •ìœ¼ë¡œ ê²€ìƒ‰ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.');
            
            // í˜„ì¬ ì„¤ì •ìœ¼ë¡œ ìë™ ê²€ìƒ‰ ì‹¤í–‰
            if (currentSearchType && document.getElementById('searchInput').value.trim()) {
                executeSearch();
            } else {
                addLog('âš ï¸ ê²€ìƒ‰ íƒ€ì…ê³¼ ê²€ìƒ‰ì–´ë¥¼ ë¨¼ì € ì„¤ì •í•´ì£¼ì„¸ìš”.');
                stopOperation();
            }
        }

        function stopOperation() {
            isWorking = false;
            document.getElementById('workingIndicator').classList.remove('active');
            document.getElementById('workStatus').textContent = 'ëŒ€ê¸°ì¤‘';
            addLog('â¹ï¸ ì‘ì—…ì„ ì¤‘ì§€í–ˆìŠµë‹ˆë‹¤.');
        }

        function clearResults() {
            searchResults = [];
            document.getElementById('resultsContainer').innerHTML = '<div class="loading">ê²°ê³¼ê°€ ì§€ì›Œì¡ŒìŠµë‹ˆë‹¤.</div>';
            document.getElementById('totalResults').textContent = '0';
            document.getElementById('selectedCount').textContent = '0';
            
            const defaultImageUrl = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE2OCIgdmlld0JveD0iMCAwIDMwMCAxNjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMTY4IiBmaWxsPSIjQ0NDQ0NDIi8+Cjx0ZXh0IHg9IjE1MCIgeT0iNzUiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZpbGw9IiM2NjY2NjYiIGZvbnQtc2l6ZT0iMTYiPu2ZlOyDgSDrjIDquLDqs6DsoLA8L3RleHQ+Cjx0ZXh0IHg9IjE1MCIgeT0iMTAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSIjNjY2NjY2IiBmb250LXNpemU9IjEyIj7shKDtg50g7ZWE7JqU7JeQ7ISc64usPC90ZXh0Pgo8L3N2Zz4K';
            
            document.getElementById('previewContent').innerHTML = `
                <img src="${defaultImageUrl}" 
                     alt="ë¯¸ë¦¬ë³´ê¸°" class="preview-thumbnail" 
                     onerror="handleImageError(this)">
                <div class="preview-info">ì˜ìƒì„ ì„ íƒí•˜ë©´ ë¯¸ë¦¬ë³´ê¸°ê°€ í‘œì‹œë©ë‹ˆë‹¤.</div>
            `;
            
            addLog('ê²€ìƒ‰ ê²°ê³¼ê°€ ì§€ì›Œì¡ŒìŠµë‹ˆë‹¤.');
        }

        function exportToExcel() {
            if (!searchResults || searchResults.length === 0) {
                alert('âŒ ë‚´ë³´ë‚¼ ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\në¨¼ì € ê²€ìƒ‰ì„ ì‹¤í–‰í•´ì£¼ì„¸ìš”.');
                addLog('âŒ ì—‘ì…€ ë‚´ë³´ë‚´ê¸° ì‹¤íŒ¨: ê²€ìƒ‰ ê²°ê³¼ ì—†ìŒ');
                return;
            }
            
            addLog('ğŸ“Š ì—‘ì…€ íŒŒì¼ë¡œ ë‚´ë³´ë‚´ê¸°ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...');
            
            // CSV í˜•ì‹ìœ¼ë¡œ ë°ì´í„° ìƒì„±
            const headers = ['ì±„ë„ëª…', 'ì œëª©', 'ì—…ë¡œë“œì¼', 'ì¡°íšŒìˆ˜', 'ì‹œê°„ë‹¹ì¡°íšŒìˆ˜', 'êµ¬ë…ììˆ˜', 'ì˜ìƒê¸¸ì´', 'ì˜ìƒURL', 'ì¸ë„¤ì¼URL', 'ì¶œì²˜'];
            const csvData = [
                headers,
                ...searchResults.map(item => [
                    item.channel,
                    item.title,
                    item.uploadDate,
                    item.views,
                    item.viewsPerHour,
                    item.subscribers,
                    item.duration,
                    item.videoUrl,
                    item.thumbnailUrl,
                    item.source
                ])
            ];
            
            const csvContent = csvData.map(row => 
                row.map(field => `"${String(field).replace(/"/g, '""')}"`).join(',')
            ).join('\n');
            
            // BOM ì¶”ê°€ (Excelì—ì„œ í•œê¸€ ê¹¨ì§ ë°©ì§€)
            const bom = '\uFEFF';
            const blob = new Blob([bom + csvContent], { type: 'text/csv;charset=utf-8;' });
            
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            const fileName = `YouTube_Hot_Finder_ê²°ê³¼_${new Date().toLocaleDateString('ko-KR').replace(/\./g, '-')}.csv`;
            
            link.setAttribute('href', url);
            link.setAttribute('download', fileName);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            addLog(`âœ… ì—‘ì…€ íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì™„ë£Œ: ${fileName}`);
            addLog(`ğŸ“„ ì´ ${searchResults.length}ê°œ í•­ëª©ì´ ë‚´ë³´ë‚´ì¡ŒìŠµë‹ˆë‹¤.`);
        }

        function saveCurrentWork() {
            const workData = {
                timestamp: new Date().toISOString(),
                searchType: currentSearchType,
                searchQuery: document.getElementById('searchInput').value,
                searchSettings: searchSettings,
                searchResults: searchResults,
                selectedRow: selectedRow
            };
            
            const dataStr = JSON.stringify(workData, null, 2);
            const blob = new Blob([dataStr], { type: 'application/json' });
            
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            const fileName = `YouTube_Hot_Finder_ì‘ì—…_${new Date().toLocaleDateString('ko-KR').replace(/\./g, '-')}.json`;
            
            link.setAttribute('href', url);
            link.setAttribute('download', fileName);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            addLog(`ğŸ’¾ í˜„ì¬ ì‘ì—…ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤: ${fileName}`);
            addLog(`ğŸ“Š ê²€ìƒ‰ ê²°ê³¼ ${searchResults.length}ê°œì™€ ì„¤ì •ì´ í¬í•¨ë˜ì—ˆìŠµë‹ˆë‹¤.`);
        }

        function loadWork() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            input.onchange = function(event) {
                const file = event.target.files[0];
                if (!file) return;
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        const workData = JSON.parse(e.target.result);
                        
                        // ë°ì´í„° ìœ íš¨ì„± ê²€ì‚¬
                        if (!workData.timestamp || !workData.searchResults) {
                            throw new Error('ì˜¬ë°”ë¥´ì§€ ì•Šì€ ì‘ì—… íŒŒì¼ í˜•ì‹ì…ë‹ˆë‹¤.');
                        }
                        
                        // ì‘ì—… ë°ì´í„° ë³µì›
                        currentSearchType = workData.searchType || '';
                        document.getElementById('searchInput').value = workData.searchQuery || '';
                        searchSettings = { ...searchSettings, ...workData.searchSettings };
                        searchResults = workData.searchResults || [];
                        selectedRow = workData.selectedRow || null;
                        
                        // UI ì—…ë°ì´íŠ¸
                        document.getElementById('searchType').textContent = getSearchTypeText(currentSearchType);
                        document.getElementById('totalResults').textContent = searchResults.length;
                        displayResults(searchResults);
                        updateCurrentSettingsDisplay();
                        
                        // ê²€ìƒ‰ ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
                        document.querySelectorAll('.search-btn').forEach(btn => {
                            btn.classList.toggle('active', btn.dataset.type === currentSearchType);
                        });
                        
                        addLog(`ğŸ“‚ ì‘ì—…ì„ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤: ${file.name}`);
                        addLog(`ğŸ“… ì €ì¥ ì‹œê°„: ${new Date(workData.timestamp).toLocaleString('ko-KR')}`);
                        addLog(`ğŸ“Š ê²€ìƒ‰ ê²°ê³¼ ${searchResults.length}ê°œê°€ ë³µì›ë˜ì—ˆìŠµë‹ˆë‹¤.`);
                        
                    } catch (error) {
                        alert(`âŒ ì‘ì—… íŒŒì¼ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤:\n${error.message}`);
                        addLog(`âŒ ì‘ì—… ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨: ${error.message}`);
                    }
                };
                reader.readAsText(file);
            };
            input.click();
        }

        function manageLicense() {
            const licenseModal = document.createElement('div');
            licenseModal.className = 'modal';
            licenseModal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>ğŸ” ë¼ì´ì„ ìŠ¤ ê´€ë¦¬</h2>
                        <button class="close-btn" onclick="this.closest('.modal').remove()">âœ• ë‹«ê¸°</button>
                    </div>
                    <div style="line-height: 1.6;">
                        <h4>ğŸ“‹ í˜„ì¬ ë¼ì´ì„ ìŠ¤ ì •ë³´</h4>
                        <div style="background: #f5f5f5; padding: 15px; border-radius: 8px; margin: 15px 0;">
                            <div><strong>ì œí’ˆëª…:</strong> YouTube Hot Finder v2.5</div>
                            <div><strong>ë¼ì´ì„ ìŠ¤:</strong> ë¬´ë£Œ ë°ëª¨ ë²„ì „</div>
                            <div><strong>ì‚¬ìš©ì:</strong> ë°ëª¨ ì‚¬ìš©ì</div>
                            <div><strong>ë§Œë£Œì¼:</strong> ì œí•œ ì—†ìŒ</div>
                            <div><strong>API í• ë‹¹ëŸ‰:</strong> ë¬´ì œí•œ (ë”ë¯¸ ë°ì´í„°)</div>
                        </div>
                        
                        <h4>ğŸ”‘ ë¼ì´ì„ ìŠ¤ í‚¤ ì…ë ¥</h4>
                        <input type="text" placeholder="ë¼ì´ì„ ìŠ¤ í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš”" 
                               style="width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ddd; border-radius: 4px;">
                        
                        <div style="background: #e3f2fd; padding: 15px; border-radius: 8px; margin: 15px 0;">
                            <h4>ğŸ’¡ ì •ì‹ ë²„ì „ ê¸°ëŠ¥</h4>
                            <ul style="margin: 10px 0;">
                                <li>âœ… ì‹¤ì œ YouTube API ì—°ë™</li>
                                <li>âœ… ë¬´ì œí•œ ê²€ìƒ‰ ê²°ê³¼</li>
                                <li>âœ… ê³ ê¸‰ í•„í„°ë§ ì˜µì…˜</li>
                                <li>âœ… ìë™ ì—…ë°ì´íŠ¸</li>
                                <li>âœ… ê¸°ìˆ  ì§€ì›</li>
                            </ul>
                        </div>
                    </div>
                    <div class="modal-actions">
                        <button class="modal-btn save" onclick="alert('ë°ëª¨ ë²„ì „ì—ì„œëŠ” ë¼ì´ì„ ìŠ¤ ê¸°ëŠ¥ì´ ì œí•œë©ë‹ˆë‹¤.')">ğŸ”‘ ë¼ì´ì„ ìŠ¤ ì ìš©</button>
                        <button class="modal-btn cancel" onclick="this.closest('.modal').remove()">âŒ ì·¨ì†Œ</button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(licenseModal);
            licenseModal.style.display = 'block';
            addLog('ğŸ” ë¼ì´ì„ ìŠ¤ ê´€ë¦¬ ì°½ì„ ì—´ì—ˆìŠµë‹ˆë‹¤.');
        }

        function openClassification() {
            const classModal = document.createElement('div');
            classModal.className = 'modal';
            classModal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>ğŸ·ï¸ ë¶„ë¥˜ ê´€ë¦¬</h2>
                        <button class="close-btn" onclick="this.closest('.modal').remove()">âœ• ë‹«ê¸°</button>
                    </div>
                    <div>
                        <h4>ğŸ“‚ í˜„ì¬ ë¶„ë¥˜ íƒœê·¸</h4>
                        <div style="display: flex; flex-wrap: wrap; gap: 8px; margin: 15px 0;">
                            <span style="padding: 6px 12px; background: #e3f2fd; border-radius: 20px; font-size: 12px;">ì‹œë‹ˆì–´</span>
                            <span style="padding: 6px 12px; background: #fff3e0; border-radius: 20px; font-size: 12px;">ë…ë¦½</span>
                            <span style="padding: 6px 12px; background: #fce4ec; border-radius: 20px; font-size: 12px;">ê°€ì¡±</span>
                            <span style="padding: 6px 12px; background: #f3e5f5; border-radius: 20px; font-size: 12px;">ë…¸ì¸</span>
                        </div>
                        
                        <h4>â• ìƒˆ ë¶„ë¥˜ ì¶”ê°€</h4>
                        <div style="display: flex; gap: 10px; margin: 15px 0;">
                            <input type="text" placeholder="ìƒˆ ë¶„ë¥˜ëª…ì„ ì…ë ¥í•˜ì„¸ìš”" 
                                   style="flex: 1; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                            <button style="padding: 8px 16px; background: #4CAF50; color: white; border: none; border-radius: 4px; cursor: pointer;">ì¶”ê°€</button>
                        </div>
                        
                        <h4>ğŸ¯ ìë™ ë¶„ë¥˜ ê·œì¹™</h4>
                        <div style="background: #f5f5f5; padding: 15px; border-radius: 8px; margin: 15px 0;">
                            <div style="margin-bottom: 10px;">
                                <label style="display: block; font-weight: bold; margin-bottom: 5px;">í‚¤ì›Œë“œ í¬í•¨ ì‹œ ìë™ ë¶„ë¥˜:</label>
                                <div style="font-size: 12px; color: #666;">
                                    "ì‹œë‹ˆì–´, ë…¸ì¸" â†’ ì‹œë‹ˆì–´ ë¶„ë¥˜<br>
                                    "ê°ˆë“±, ë¬¸ì œ" â†’ ê°ˆë“± ë¶„ë¥˜<br>
                                    "ë…ë¦½, ìƒˆì¶œë°œ" â†’ ë…ë¦½ ë¶„ë¥˜
                                </div>
                            </div>
                        </div>
                        
                        <h4>ğŸ“Š ë¶„ë¥˜ë³„ í†µê³„</h4>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin: 15px 0;">
                            <div style="background: #e3f2fd; padding: 10px; border-radius: 4px; text-align: center;">
                                <div style="font-size: 20px; font-weight: bold;">25</div>
                                <div style="font-size: 12px;">ì‹œë‹ˆì–´ ê´€ë ¨</div>
                            </div>
                            <div style="background: #e8f5e8; padding: 10px; border-radius: 4px; text-align: center;">
                                <div style="font-size: 20px; font-weight: bold;">18</div>
                                <div style="font-size: 12px;">ê°ˆë“± ê´€ë ¨</div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-actions">
                        <button class="modal-btn save" onclick="alert('ë¶„ë¥˜ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!'); addLog('ğŸ·ï¸ ë¶„ë¥˜ ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');">ğŸ’¾ ì €ì¥</button>
                        <button class="modal-btn reset" onclick="alert('ë¶„ë¥˜ê°€ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤!'); addLog('ğŸ”„ ë¶„ë¥˜ê°€ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.');">ğŸ”„ ì´ˆê¸°í™”</button>
                        <button class="modal-btn cancel" onclick="this.closest('.modal').remove()">âŒ ì·¨ì†Œ</button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(classModal);
            classModal.style.display = 'block';
            addLog('ğŸ·ï¸ ë¶„ë¥˜ ê´€ë¦¬ ì°½ì„ ì—´ì—ˆìŠµë‹ˆë‹¤.');
        }

        function exitProgram() {
            if (confirm('ğŸšª í”„ë¡œê·¸ë¨ì„ ì¢…ë£Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n\nì €ì¥ë˜ì§€ ì•Šì€ ì‘ì—…ì€ ì‚¬ë¼ì§‘ë‹ˆë‹¤.')) {
                addLog('ğŸ‘‹ í”„ë¡œê·¸ë¨ì„ ì¢…ë£Œí•©ë‹ˆë‹¤. ì´ìš©í•´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤!');
                setTimeout(() => {
                    if (confirm('ì •ë§ë¡œ ì°½ì„ ë‹«ìœ¼ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                        window.close();
                    }
                }, 1000);
            }
        }

        // í•„í„° ë° ì •ë ¬ í•¨ìˆ˜ë“¤
        function applySearchFilters(results) {
            return results.filter(item => {
                if (searchSettings.minViews && item.views < searchSettings.minViews) return false;
                if (searchSettings.maxViews && item.views > searchSettings.maxViews) return false;
                if (searchSettings.minViewsPerHour && item.viewsPerHour < searchSettings.minViewsPerHour) return false;
                return true;
            });
        }

        function applySorting(results) {
            const sortBy = searchSettings.sortBy;
            return results.sort((a, b) => {
                switch(sortBy) {
                    case 'viewCount':
                        return b.views - a.views;
                    case 'date':
                        return new Date(b.uploadDate) - new Date(a.uploadDate);
                    case 'rating':
                        return b.viewsPerHour - a.viewsPerHour;
                    case 'relevance':
                    default:
                        return 0;
                }
            });
        }

        // ëª…ë ¹ì–´ ì²˜ë¦¬
        function handleCommand(event) {
            if (event.key === 'Enter') {
                const command = event.target.value.trim();
                if (command) {
                    addLog(`> ${command}`);
                    processCommand(command);
                    event.target.value = '';
                }
            }
        }

        function processCommand(command) {
            const parts = command.toLowerCase().split(' ');
            const cmd = parts[0];
            
            switch(cmd) {
                case 'search':
                    if (parts[1]) {
                        document.getElementById('searchInput').value = parts.slice(1).join(' ');
                        executeSearch();
                    }
                    break;
                case 'keyword':
                    currentSearchType = 'keyword';
                    document.getElementById('searchInput').value = parts.slice(1).join(' ');
                    addLog('í‚¤ì›Œë“œ ê²€ìƒ‰ ëª¨ë“œë¡œ ì „í™˜ë˜ì—ˆìŠµë‹ˆë‹¤.');
                    break;
                case 'clear':
                    clearResults();
                    break;
                case 'help':
                    addLog('ğŸ“‹ ì‚¬ìš© ê°€ëŠ¥í•œ ëª…ë ¹ì–´:');
                    addLog('  â€¢ search [ê²€ìƒ‰ì–´] - ë°”ë¡œ ê²€ìƒ‰ ì‹¤í–‰');
                    addLog('  â€¢ keyword [í‚¤ì›Œë“œ] - í‚¤ì›Œë“œ ê²€ìƒ‰ ëª¨ë“œ');
                    addLog('  â€¢ clear - ê²°ê³¼ ì§€ìš°ê¸°');
                    addLog('  â€¢ help - ì´ ë„ì›€ë§ í‘œì‹œ');
                    break;
                default:
                    addLog(`ì•Œ ìˆ˜ ì—†ëŠ” ëª…ë ¹ì–´: ${cmd}`);
            }
        }

        // ë¡œê·¸ í•¨ìˆ˜
        function addLog(message) {
            const logElement = document.getElementById('commandLog');
            const time = getCurrentTime();
            logElement.innerHTML += `\n[${time}] ${message}`;
            logElement.scrollTop = logElement.scrollHeight;
        }

        function getCurrentTime() {
            return new Date().toLocaleTimeString('ko-KR', { hour12: false });
        }

        // ë¹ ë¥¸ í…ŒìŠ¤íŠ¸ í•¨ìˆ˜
        function runQuickTest() {
            addLog('âš¡ ë¹ ë¥¸ í…ŒìŠ¤íŠ¸ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...');
            
            // í‚¤ì›Œë“œ ê²€ìƒ‰ ëª¨ë“œë¡œ ì„¤ì •
            currentSearchType = 'keyword';
            document.querySelectorAll('.search-btn').forEach(b => b.classList.remove('active'));
            document.querySelector('[data-type="keyword"]').classList.add('active');
            document.getElementById('searchType').textContent = 'í‚¤ì›Œë“œì…ë ¥';
            
            // ê²€ìƒ‰ì–´ ì…ë ¥
            document.getElementById('searchInput').value = 'ë…¸ì¸, ì‹œë‹ˆì–´';
            
            addLog('ğŸ” ê²€ìƒ‰ ì„¤ì •: í‚¤ì›Œë“œì…ë ¥ ëª¨ë“œ, ê²€ìƒ‰ì–´: "ë…¸ì¸, ì‹œë‹ˆì–´"');
            addLog('â³ ê²€ìƒ‰ì„ ì‹¤í–‰í•©ë‹ˆë‹¤...');
            
            // ê²€ìƒ‰ ì‹¤í–‰
            executeSearch();
        }

        // í˜ì´ì§€ ë¡œë“œì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            try {
                console.log('YouTube Hot Finder v2.5 ì´ˆê¸°í™” ì‹œì‘');
                
                const exampleKeywords = "ì‹œë‹ˆì–´, ë…¸ì¸, ê°ˆë“±, ì´ì•¼ê¸°, ë…ë¦½";
                const searchInput = document.getElementById('searchInput');
                if (searchInput) {
                    searchInput.placeholder = `í‚¤ì›Œë“œë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: ${exampleKeywords})`;
                }
                
                // API í• ë‹¹ëŸ‰ ì´ˆê¸°í™”
                checkApiQuota();
                
                addLog('YouTube Hot Finder v2.5ê°€ ì„±ê³µì ìœ¼ë¡œ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.');
                addLog('ğŸ”‘ ì‹¤ì œ YouTube API ì—°ë™ì´ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤!');
                addLog('ğŸ“Š ì¼ì¼ API í• ë‹¹ëŸ‰: 10,000 ë‹¨ìœ„ (ê²€ìƒ‰ 1íšŒ = ì•½ 300 ë‹¨ìœ„)');
                addLog('ğŸ’¡ ìœ íš¨í•œ API í‚¤ë¥¼ ì…ë ¥í•˜ë©´ ì‹¤ì œ YouTube ë°ì´í„°ë¥¼ ê²€ìƒ‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
                addLog('âš ï¸ API í‚¤ê°€ ì—†ê±°ë‚˜ CORS ì˜¤ë¥˜ ì‹œ ë”ë¯¸ ë°ì´í„°ë¡œ ì‹œì—°í•©ë‹ˆë‹¤.');
                
                console.log('ë”ë¯¸ ë°ì´í„° ê°œìˆ˜:', dummyData.length);
                console.log('ë”ë¯¸ ë°ì´í„° ì²« ë²ˆì§¸ í•­ëª©:', dummyData[0]);
                
                window.addEventListener('error', function(e) {
                    console.error('ì „ì—­ ì—ëŸ¬ ë°œìƒ:', e.error);
                    addLog(`âŒ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ${e.error?.message || e.message}`);
                });
                
                addLog('ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì™„ë£Œ - ì‹¤ì œ YouTube API ê²€ìƒ‰ì´ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤.');
                
            } catch (error) {
                console.error('ì´ˆê¸°í™” ì¤‘ ì˜¤ë¥˜:', error);
                addLog(`âŒ ì´ˆê¸°í™” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ${error.message}`);
            }
        });

        // ì—”í„°í‚¤ë¡œ ê²€ìƒ‰ ì‹¤í–‰
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                executeSearch();
            }
        });
    </script>
</body>
</html>
